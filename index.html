<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Love Journey</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* All your existing CSS styles remain exactly the same */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary-color: #ff6b8b;
            --secondary-color: #ff8e9e;
            --accent-color: #ffd3d3;
            --text-color: #333;
            --white: #ffffff;
            --shadow: rgba(0,0,0,0.1);
            --gold: #ffd700;
            --highlight-blue: #4a90e2;
            --boomerang-color: #9c6bff;
            --diary-color: #a0522d;
            --plant-color: #228B22;
        }

        body {
            background: linear-gradient(135deg, rgba(255, 107, 139, 0.85) 0%, rgba(255, 142, 158, 0.85) 100%), 
                        url('https://images.unsplash.com/photo-1518568814500-bf0f8d125f46?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80') center/cover no-repeat fixed;
            min-height: 100vh;
            color: var(--text-color);
            overflow-x: hidden;
            line-height: 1.6;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 900px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
            overflow: hidden;
            position: relative;
            animation: fadeIn 1s ease;
            border: 8px solid var(--white);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: var(--white);
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
            clip-path: polygon(0 0, 100% 0, 100% 90%, 0 100%);
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.1" d="M0,192L48,197.3C96,203,192,213,288,229.3C384,245,480,267,576,261.3C672,256,768,224,864,213.3C960,203,1056,213,1152,229.3C1248,245,1344,267,1392,277.3L1440,288L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>');
            background-size: cover;
            background-position: center;
        }

        .title {
            font-size: clamp(2.5rem, 6vw, 3.5rem);
            margin-bottom: 15px;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.2);
            font-weight: 800;
            letter-spacing: 1.5px;
            position: relative;
            background: linear-gradient(45deg, #ffffff, #ffd3d3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            font-size: clamp(1.1rem, 3.5vw, 1.3rem);
            opacity: 0.95;
            max-width: 700px;
            margin: 0 auto;
            position: relative;
            font-weight: 500;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }

        .content {
            padding: 30px 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><path fill="%23ffd3d3" fill-opacity="0.1" d="M30,50 C30,30 50,30 50,50 C50,30 70,30 70,50 C70,70 50,70 50,50 C50,70 30,70 30,50 Z"></path></svg>');
        }

        /* IMPROVED BUTTON STYLES */
        .menu-buttons {
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
        }

        .menu-btn {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: var(--white);
            border: none;
            padding: 22px 30px;
            border-radius: 18px;
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 10px 25px rgba(255, 107, 139, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            font-weight: 700;
            width: 100%;
            position: relative;
            overflow: hidden;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
            letter-spacing: 0.5px;
            z-index: 1;
        }

        .menu-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: 0.6s;
            z-index: -1;
        }

        .menu-btn:hover::before {
            left: 100%;
        }

        .menu-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--secondary-color) 0%, var(--primary-color) 100%);
            opacity: 0;
            transition: opacity 0.4s ease;
            z-index: -1;
        }

        .menu-btn:hover {
            transform: translateY(-8px) scale(1.03);
            box-shadow: 0 15px 35px rgba(255, 107, 139, 0.5);
        }

        .menu-btn:hover::after {
            opacity: 1;
        }

        .menu-btn i {
            font-size: 1.6rem;
            filter: drop-shadow(1px 1px 2px rgba(0,0,0,0.2));
            transition: transform 0.3s ease;
        }

        .menu-btn:hover i {
            transform: scale(1.2);
        }

    .menu-btn.completed {
    background: linear-gradient(135deg, #9c27b0 0%, #7b1fa2 100%);
    box-shadow: 0 10px 25px rgba(156, 39, 176, 0.4);
}

.menu-btn.completed:hover {
    box-shadow: 0 15px 35px rgba(156, 39, 176, 0.5);
}

.menu-btn.completed::after {
    background: linear-gradient(135deg, #7b1fa2 0%, #9c27b0 100%);
}

        /* Plant Love Tree button with new color */
        .menu-btn.plant {
            background: linear-gradient(135deg, var(--plant-color) 0%, #32CD32 100%);
            box-shadow: 0 10px 25px rgba(34, 139, 34, 0.4);
        }

        .menu-btn.plant:hover {
            box-shadow: 0 15px 35px rgba(34, 139, 34, 0.5);
        }

        .menu-btn.plant::after {
            background: linear-gradient(135deg, #32CD32 0%, var(--plant-color) 100%);
        }

        /* Diary button with new color */
        .menu-btn.diary {
            background: linear-gradient(135deg, var(--diary-color) 0%, #d2691e 100%);
            box-shadow: 0 10px 25px rgba(160, 82, 45, 0.4);
        }

        .menu-btn.diary:hover {
            box-shadow: 0 15px 35px rgba(160, 82, 45, 0.5);
        }

        .menu-btn.diary::after {
            background: linear-gradient(135deg, #d2691e 0%, var(--diary-color) 100%);
        }

        /* Button ripple effect */
        .menu-btn .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.7);
            transform: scale(0);
            animation: ripple-animation 0.6s linear;
            pointer-events: none;
        }

        @keyframes ripple-animation {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        /* Enhanced action buttons */
        .action-btn {
            background: #f0f0f0;
            border: none;
            padding: 10px 18px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .action-btn.edit {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            color: #1976d2;
            border: 1px solid #90caf9;
        }

        .action-btn.delete {
            background: linear-gradient(135deg, #ffebee, #ffcdd2);
            color: #d32f2f;
            border: 1px solid #ef9a9a;
        }

        .action-btn.change-photo {
            background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
            color: #388e3c;
            border: 1px solid #a5d6a7;
        }

        .action-btn.remove-photo {
            background: linear-gradient(135deg, #fff3e0, #ffe0b2);
            color: #f57c00;
            border: 1px solid #ffb74d;
        }

        .action-btn.water {
            background: linear-gradient(135deg, #2196F3, #1976D2);
            color: white;
            border: 1px solid #64b5f6;
        }

        .action-btn.revive {
            background: linear-gradient(135deg, #FF9800, #F57C00);
            color: white;
            border: 1px solid #ffb74d;
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .action-btn:active {
            transform: translateY(-1px);
        }

        /* Enhanced form buttons */
        .btn {
            padding: 16px 32px;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 6px 15px rgba(0,0,0,0.1);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            box-shadow: 0 8px 20px rgba(255, 107, 139, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(255, 107, 139, 0.5);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f0f0f0, #e0e0e0);
            color: #555;
            border: 1px solid #d0d0d0;
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #e0e0e0, #d0d0d0);
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.1);
        }

        /* Enhanced back button */
        .back-btn {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid var(--primary-color);
            padding: 14px 28px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s ease;
            font-weight: 600;
            margin-bottom: 25px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            color: var(--primary-color);
            position: relative;
            overflow: hidden;
        }

        .back-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: translateX(-8px);
            box-shadow: 0 12px 25px rgba(255, 107, 139, 0.3);
        }

        .back-btn:active {
            transform: translateX(-5px);
        }

        /* Enhanced delete confirmation buttons */
        .delete-confirm-btn {
            background: linear-gradient(135deg, #d32f2f, #b71c1c);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 12px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 6px 15px rgba(211, 47, 47, 0.4);
        }

        .delete-confirm-btn:hover {
            background: linear-gradient(135deg, #b71c1c, #d32f2f);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(211, 47, 47, 0.5);
        }

        .delete-cancel-btn {
            background: linear-gradient(135deg, #f0f0f0, #e0e0e0);
            color: #555;
            border: none;
            padding: 14px 28px;
            border-radius: 12px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .delete-cancel-btn:hover {
            background: linear-gradient(135deg, #e0e0e0, #d0d0d0);
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.15);
        }

        /* Enhanced add entry button */
        .add-entry-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 18px 35px;
            border-radius: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 25px rgba(76, 175, 80, 0.4);
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 700;
            margin: 25px auto;
            position: relative;
            overflow: hidden;
        }

        .add-entry-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: 0.6s;
        }

        .add-entry-btn:hover::before {
            left: 100%;
        }

        .add-entry-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(76, 175, 80, 0.5);
        }

        /* Save reasons button */
        .save-reasons-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 15px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            margin: 25px auto;
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.4);
            position: relative;
            overflow: hidden;
        }

        .save-reasons-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(76, 175, 80, 0.5);
        }

        /* Button focus states for accessibility */
        .menu-btn:focus,
        .action-btn:focus,
        .btn:focus,
        .back-btn:focus,
        .delete-confirm-btn:focus,
        .delete-cancel-btn:focus,
        .add-entry-btn:focus,
        .save-reasons-btn:focus {
            outline: 2px solid var(--highlight-blue);
            outline-offset: 2px;
        }

        /* Responsive button adjustments */
        @media (max-width: 768px) {
            .menu-btn {
                padding: 18px 25px;
                font-size: 1.2rem;
            }
            
            .btn {
                padding: 14px 25px;
            }
            
            .action-btn {
                padding: 8px 15px;
                font-size: 0.85rem;
            }
            
            .save-reasons-btn {
                padding: 14px 25px;
            }
        }

        @media (max-width: 480px) {
            .menu-btn {
                padding: 16px 22px;
                font-size: 1.1rem;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 1rem;
            }
            
            .back-btn {
                padding: 12px 20px;
                font-size: 1rem;
            }
            
            .save-reasons-btn {
                padding: 12px 20px;
                font-size: 1rem;
            }
        }

        /* Page Styles */
        .page {
            display: none;
            min-height: 500px;
            padding: 30px;
        }

        .page.active {
            display: block;
        }

        .page-title {
            text-align: center;
            margin-bottom: 25px;
            color: var(--primary-color);
            font-size: clamp(2rem, 6vw, 2.5rem);
            font-weight: 800;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
            position: relative;
            display: inline-block;
            left: 50%;
            transform: translateX(-50%);
        }

        .page-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 10%;
            width: 80%;
            height: 4px;
            background: linear-gradient(to right, transparent, var(--primary-color), transparent);
            border-radius: 2px;
        }

        .page-subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: clamp(1rem, 3.5vw, 1.2rem);
            padding: 0 15px;
            font-weight: 500;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        /* NEW: Diary Page Styles - Romantic Modern */
        .diary-container {
            display: flex;
            flex-direction: column;
            gap: 25px;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
        }

        .diary-entry {
            background: linear-gradient(135deg, #fff9fa, #ffeef1);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(255, 107, 139, 0.15);
            transition: all 0.5s ease;
            border-left: 8px solid var(--primary-color);
            position: relative;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .diary-entry::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 107, 139, 0.05), rgba(255, 142, 158, 0.02));
            z-index: 0;
        }

        .diary-entry:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 40px rgba(255, 107, 139, 0.25);
            border: 2px solid var(--primary-color);
        }

        .diary-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .diary-date {
            font-weight: bold;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
            font-family: 'Georgia', serif;
        }

        .diary-mood {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            background: rgba(255, 107, 139, 0.1);
            box-shadow: 0 5px 15px rgba(255, 107, 139, 0.2);
            backdrop-filter: blur(5px);
            border: 2px solid rgba(255, 107, 139, 0.3);
        }

        .diary-title {
            font-size: 1.6rem;
            font-weight: 800;
            color: var(--text-color);
            margin-bottom: 20px;
            line-height: 1.4;
            position: relative;
            z-index: 1;
            font-family: 'Georgia', serif;
        }

        /* FIXED: Diary content - hindi lalagpas sa box */
        .diary-content {
            color: #555;
            line-height: 1.8;
            font-size: 1.15rem;
            position: relative;
            z-index: 1;
            margin-bottom: 15px;
            text-align: justify;
            /* FIXED PROPERTIES */
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: pre-wrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 4;
            -webkit-box-orient: vertical;
            max-height: 7.2em;
        }

        .diary-entry.expanded .diary-content {
            -webkit-line-clamp: unset;
            max-height: none;
        }

        .diary-read-more {
            color: var(--primary-color);
            font-weight: 700;
            font-size: 1rem;
            display: inline-block;
            margin-top: 15px;
            position: relative;
            z-index: 1;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .diary-read-more:hover {
            text-decoration: underline;
            transform: translateX(5px);
        }

       /* DIARY ENTRY ACTIONS STYLES */
.diary-actions {
    display: flex;
    gap: 10px;
    margin-top: 20px;
    justify-content: flex-end;
    opacity: 0.8;
    transition: opacity 0.3s ease;
}

.diary-entry:hover .diary-actions {
    opacity: 1;
}

.diary-actions .action-btn {
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 0.9rem;
    font-weight: 600;
    border: none;
}

.diary-actions .action-btn.edit {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: white;
}

.diary-actions .action-btn.delete {
    background: linear-gradient(135deg, #ff6b6b, #ff5252);
    color: white;
}

.diary-actions .action-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.diary-actions .action-btn.edit:hover {
    box-shadow: 0 4px 12px rgba(255, 107, 139, 0.3);
}

.diary-actions .action-btn.delete:hover {
    box-shadow: 0 4px 12px rgba(255, 82, 82, 0.3);
}

/* Diary Entry Styling */
.diary-entry {
    background: linear-gradient(135deg, #fff9fa, #ffeef1);
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 15px 35px rgba(255, 107, 139, 0.15);
    transition: all 0.5s ease;
    border-left: 8px solid var(--primary-color);
    position: relative;
    overflow: hidden;
    cursor: pointer;
    border: 2px solid transparent;
    margin-bottom: 20px;
}

.diary-entry::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(255, 107, 139, 0.05), rgba(255, 142, 158, 0.02));
    z-index: 0;
}

.diary-entry:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 40px rgba(255, 107, 139, 0.25);
    border: 2px solid var(--primary-color);
}

.diary-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    position: relative;
    z-index: 1;
}

.diary-date {
    font-weight: bold;
    color: var(--primary-color);
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.2rem;
}

.diary-mood {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8rem;
    background: rgba(255, 107, 139, 0.1);
    box-shadow: 0 5px 15px rgba(255, 107, 139, 0.2);
    border: 2px solid rgba(255, 107, 139, 0.3);
}

.diary-title {
    font-size: 1.6rem;
    font-weight: 800;
    color: var(--text-color);
    margin-bottom: 20px;
    line-height: 1.4;
    position: relative;
    z-index: 1;
}

.diary-read-more {
    color: var(--primary-color);
    font-weight: 700;
    font-size: 1rem;
    display: inline-block;
    margin-top: 15px;
    position: relative;
    z-index: 1;
    text-decoration: none;
    transition: all 0.3s ease;
}

.diary-read-more:hover {
    text-decoration: underline;
    transform: translateX(5px);
}

        /* Add diary entry card */
        .add-diary-card {
            background: linear-gradient(135deg, rgba(255, 107, 139, 0.1), rgba(255, 142, 158, 0.05));
            border: 3px dashed var(--primary-color);
            padding: 40px 30px;
            border-radius: 20px;
            text-align: center;
            margin: 30px 0;
            transition: all 0.5s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .add-diary-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 107, 139, 0.1), transparent);
            transition: 0.6s;
        }

        .add-diary-card:hover::before {
            left: 100%;
        }

        .add-diary-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 20px 40px rgba(255, 107, 139, 0.2);
            border-color: var(--secondary-color);
        }

        .add-diary-icon {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 20px;
            display: block;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .add-diary-text {
            font-size: 1.4rem;
            color: var(--primary-color);
            font-weight: 800;
        }

        /* Diary stats */
        .diary-stats {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
            padding: 20px;
            background: linear-gradient(135deg, rgba(255, 107, 139, 0.15), rgba(255, 142, 158, 0.1));
            border-radius: 20px;
            border: 2px solid rgba(255, 107, 139, 0.2);
            box-shadow: 0 10px 25px rgba(255, 107, 139, 0.15);
        }

        .diary-stat-item {
            text-align: center;
        }

        .diary-stat-number {
            font-size: 2.2rem;
            font-weight: 800;
            color: var(--primary-color);
            display: block;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .diary-stat-label {
            font-size: 1rem;
            color: #666;
            font-weight: 600;
        }

        /* Diary Modal Styles */
        .diary-modal-content {
            background: linear-gradient(135deg, #fff9fa, #ffeef1);
            padding: clamp(40px, 6vw, 60px) clamp(30px, 5vw, 50px);
            border-radius: 30px;
            max-width: min(800px, 95vw);
            width: 100%;
            text-align: center;
            position: relative;
            box-shadow: 0 30px 70px rgba(0,0,0,0.4);
            animation: scaleUp 0.5s ease;
            border: 10px solid var(--primary-color);
        }

        .diary-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            position: relative;
        }

        .diary-modal-date {
            font-weight: bold;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
            font-family: 'Georgia', serif;
        }

        .diary-modal-mood {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            background: rgba(255, 107, 139, 0.1);
            box-shadow: 0 8px 25px rgba(255, 107, 139, 0.3);
            border: 3px solid var(--primary-color);
        }

        #diary-modal-title {
            color: var(--text-color);
            margin-bottom: 30px;
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            font-weight: 800;
            line-height: 1.3;
            text-align: left;
            font-family: 'Georgia', serif;
        }

        /* FIXED: Modal content */
        #diary-modal-content {
            line-height: 1.9;
            color: #555;
            font-size: clamp(1.2rem, 3.5vw, 1.4rem);
            text-align: left;
            padding: 0 20px;
            margin-bottom: 40px;
            white-space: pre-wrap;
            background: rgba(255, 255, 255, 0.5);
            padding: 30px;
            border-radius: 15px;
            border-left: 5px solid var(--primary-color);
            /* FIXED PROPERTIES */
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
            display: block;
        }

        /* 10 Reasons Page Styles - Romantic Modern - UPDATED WITH FIXED CONTENT */
        .reasons-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
        }

        .reason-card {
            background: linear-gradient(135deg, #fff9fa, #ffeef1);
            padding: 35px;
            border-radius: 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            transition: all 0.5s ease;
            cursor: pointer;
            border-left: 10px solid var(--primary-color);
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
        }

        .reason-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 40px rgba(255, 107, 139, 0.25);
            border: 2px solid var(--primary-color);
        }

        .reason-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .reason-emoji {
            font-size: 3rem;
            filter: drop-shadow(2px 2px 3px rgba(0,0,0,0.2));
            animation: float 3s ease-in-out infinite;
        }

        .reason-number {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.5rem;
            box-shadow: 0 8px 20px rgba(255, 107, 139, 0.4);
            border: 3px solid white;
        }

        .reason-title {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--text-color);
            margin-bottom: 20px;
            line-height: 1.4;
            font-family: 'Georgia', serif;
        }

        /* FIXED: Reason description - hindi lalagpas sa box */
        .reason-description {
            color: #555;
            line-height: 1.8;
            font-size: 1.15rem;
            text-align: justify;
            /* FIXED PROPERTIES */
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: pre-wrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            max-height: 5.4em;
        }

        .reason-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 25px;
        }

        /* Reason Modal Styles */
        .reason-modal-content {
            background: linear-gradient(135deg, #fff9fa, #ffeef1);
            padding: clamp(40px, 6vw, 60px) clamp(30px, 5vw, 50px);
            border-radius: 30px;
            max-width: min(800px, 95vw);
            width: 100%;
            text-align: center;
            position: relative;
            box-shadow: 0 30px 70px rgba(0,0,0,0.4);
            animation: scaleUp 0.5s ease;
            border: 10px solid var(--primary-color);
        }

        .reason-number-large {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 2.2rem;
            box-shadow: 0 15px 30px rgba(255, 107, 139, 0.5);
            margin: 0 auto 30px;
            border: 5px solid white;
        }

        #reason-modal-emoji {
            font-size: 4rem;
            margin-bottom: 25px;
            filter: drop-shadow(3px 3px 5px rgba(0,0,0,0.2));
            display: block;
            animation: float 4s ease-in-out infinite;
        }

        #reason-modal-title {
            color: var(--primary-color);
            margin-bottom: 30px;
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            font-weight: 800;
            line-height: 1.3;
            font-family: 'Georgia', serif;
        }

        #reason-modal-description {
            line-height: 1.9;
            color: #555;
            font-size: clamp(1.3rem, 3.5vw, 1.5rem);
            text-align: left;
            padding: 0 20px;
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.5);
            padding: 30px;
            border-radius: 15px;
            border-left: 5px solid var(--primary-color);
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: pre-wrap;
        }

        /* Timeline Styles - UPDATED WITH FIXED CONTENT */
        .timeline {
            position: relative;
            padding: 40px 0;
            max-width: 800px;
            margin: 0 auto;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 25px;
            width: 6px;
            height: 100%;
            background: linear-gradient(to bottom, var(--primary-color), var(--secondary-color));
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(255, 107, 139, 0.5);
        }

        .timeline-item {
            background: var(--white);
            margin: 35px 0;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            position: relative;
            width: calc(100% - 60px);
            margin-left: 60px;
            transition: all 0.4s ease;
            cursor: pointer;
            border-left: 5px solid var(--primary-color);
        }

        .timeline-item:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            top: 30px;
            left: -50px;
            width: 24px;
            height: 24px;
            background: var(--primary-color);
            border-radius: 50%;
            border: 5px solid var(--white);
            box-shadow: 0 0 0 4px var(--primary-color), 0 0 15px rgba(255, 107, 139, 0.7);
        }

        .timeline-date {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 12px;
            font-size: clamp(1rem, 3vw, 1.2rem);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .timeline-date i {
            font-size: 1.1rem;
        }

        .timeline-item h3 {
            margin-bottom: 15px;
            color: var(--text-color);
            font-size: clamp(1.3rem, 4vw, 1.6rem);
            font-weight: 700;
        }

        /* FIXED: Timeline description - hindi lalagpas sa box */
        .timeline-item p {
            line-height: 1.7;
            color: #555;
            font-size: clamp(1rem, 3vw, 1.1rem);
            /* FIXED PROPERTIES */
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: pre-wrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            max-height: 5.1em;
        }

        .timeline-image {
            width: 100%;
            max-height: 200px;
            object-fit: cover;
            border-radius: 12px;
            margin-top: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .timeline-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .photo-actions {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .love-quote {
            text-align: center;
            font-style: italic;
            color: var(--primary-color);
            margin: 20px 0;
            padding: 20px;
            background: linear-gradient(135deg, rgba(255,214,214,0.3), rgba(255,235,235,0.2));
            border-radius: 20px;
            border-left: 5px solid var(--primary-color);
            font-size: 1.2rem;
            position: relative;
            box-shadow: 0 8px 25px rgba(255,107,139,0.15);
        }

        .love-quote::before, .love-quote::after {
            content: '"';
            font-size: 2.2rem;
            color: var(--primary-color);
            opacity: 0.7;
            position: absolute;
        }

        .love-quote::before {
            top: 10px;
            left: 15px;
        }

        .love-quote::after {
            bottom: 10px;
            right: 15px;
        }

        .highlight-section {
            background: linear-gradient(135deg, var(--highlight-blue), #6ab0fe);
            color: white;
            padding: 20px;
            border-radius: 20px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 10px 30px rgba(74, 144, 226, 0.3);
            position: relative;
            overflow: hidden;
        }

        .highlight-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 3s infinite linear;
        }

        @keyframes shimmer {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .highlight-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 10px;
            position: relative;
        }

        .highlight-text {
            font-size: 1rem;
            opacity: 0.9;
            position: relative;
        }

        .special-date {
            background: linear-gradient(45deg, #ff6b8b, #ff8e9e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
            display: inline-block;
            margin: 5px 0;
            padding: 3px 10px;
            border-radius: 15px;
            background-color: rgba(255,107,139,0.1);
        }

        .memory-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 15px 0;
        }

        .memory-tag {
            background: linear-gradient(135deg, rgba(255,107,139,0.15), rgba(255,142,158,0.1));
            color: var(--primary-color);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            border: 1px solid rgba(255,107,139,0.3);
            transition: all 0.3s ease;
        }

        .memory-tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(255,107,139,0.2);
        }

        .add-memory-card {
            background: linear-gradient(135deg, #ffffff, #f9f9f9);
            border: 2px dashed var(--primary-color);
            padding: 30px 25px;
            border-radius: 20px;
            text-align: center;
            margin: 25px 0;
            transition: all 0.4s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .add-memory-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,107,139,0.1), transparent);
            transition: 0.6s;
        }

        .add-memory-card:hover::before {
            left: 100%;
        }

        .add-memory-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(255,107,139,0.2);
            border-color: var(--secondary-color);
        }

        .add-memory-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 15px;
            display: block;
        }

        .add-memory-text {
            font-size: 1.2rem;
            color: var(--primary-color);
            font-weight: 700;
        }

        .memory-stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            padding: 15px;
            background: linear-gradient(135deg, rgba(255,214,214,0.2), rgba(255,235,235,0.1));
            border-radius: 20px;
            border: 1px solid rgba(255,107,139,0.2);
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary-color);
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 600;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.4s ease;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--white);
            padding: clamp(30px, 6vw, 50px) clamp(20px, 5vw, 40px);
            border-radius: 25px;
            max-width: min(700px, 95vw);
            width: 100%;
            text-align: center;
            position: relative;
            box-shadow: 0 25px 60px rgba(0,0,0,0.4);
            animation: scaleUp 0.5s ease;
            border: 5px solid var(--accent-color);
        }

        @keyframes scaleUp {
            from { transform: scale(0.8) rotate(-5deg); opacity: 0; }
            to { transform: scale(1) rotate(0); opacity: 1; }
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: clamp(1.8rem, 5vw, 2.2rem);
            cursor: pointer;
            color: #666;
            transition: all 0.3s ease;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: #f5f5f5;
        }

        .close-modal:hover {
            color: #333;
            background: #e0e0e0;
            transform: rotate(90deg);
        }

        /* Save button in modal */
        .save-modal {
            position: absolute;
            top: 20px;
            right: 75px;
            font-size: clamp(1.5rem, 4vw, 1.8rem);
            cursor: pointer;
            color: #4CAF50;
            transition: all 0.3s ease;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: #f5f5f5;
        }

        .save-modal:hover {
            color: #45a049;
            background: #e8f5e8;
            transform: scale(1.1);
        }

        #modal-title {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: clamp(1.5rem, 5vw, 2rem);
            font-weight: 700;
        }

        #modal-description {
            line-height: 1.8;
            color: #555;
            font-size: clamp(1.1rem, 3.5vw, 1.3rem);
            text-align: left;
            padding: 0 10px;
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: pre-wrap;
        }

        #modal-image {
            max-width: 100%;
            max-height: 300px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        /* Delete Confirmation Modal */
        .delete-modal-content {
            background: var(--white);
            padding: 35px 25px;
            border-radius: 20px;
            max-width: min(500px, 90vw);
            width: 100%;
            text-align: center;
            position: relative;
            box-shadow: 0 20px 50px rgba(0,0,0,0.4);
            animation: scaleUp 0.4s ease;
        }

        .delete-modal-title {
            color: #d32f2f;
            margin-bottom: 20px;
            font-size: clamp(1.5rem, 4vw, 1.8rem);
            font-weight: 700;
        }

        .delete-modal-message {
            color: #555;
            margin-bottom: 30px;
            font-size: clamp(1rem, 3vw, 1.1rem);
            line-height: 1.6;
        }

        .delete-modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .form-container {
            background: var(--white);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-width: 600px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-color);
        }

        .form-input, .form-textarea {
            width: 100%;
            padding: 14px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-input:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 107, 139, 0.2);
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        .current-photo-container {
            margin: 15px 0;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 12px;
            border: 2px dashed #e0e0e0;
        }

        .current-photo-label {
            font-weight: 600;
            margin-bottom: 10px;
            display: block;
            color: #555;
        }

        .current-photo {
            max-width: 100%;
            max-height: 200px;
            border-radius: 8px;
            margin-bottom: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .photo-action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .floating-hearts {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 1;
        }

        .heart {
            position: absolute;
            width: 25px;
            height: 25px;
            background: rgba(255, 255, 255, 0.8);
            transform: rotate(45deg);
            opacity: 0;
            filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.5));
        }

        .heart:before, .heart:after {
            content: '';
            width: 25px;
            height: 25px;
            background: rgba(255, 255,255, 0.8);
            border-radius: 50%;
            position: absolute;
        }

        .heart:before {
            top: -12.5px;
            left: 0;
        }

        .heart:after {
            top: 0;
            left: -12.5px;
        }

        .footer {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 1rem;
            border-top: 1px solid #eee;
            background: #f9f9f9;
            font-weight: 500;
        }

        .footer i {
            color: var(--primary-color);
            margin: 0 5px;
            animation: heartbeat 1.5s infinite;
        }

        @keyframes heartbeat {
            0% { transform: scale(1); }
            5% { transform: scale(1.1); }
            10% { transform: scale(1); }
            15% { transform: scale(1.1); }
            20% { transform: scale(1); }
            100% { transform: scale(1); }
        }

        /* Decorative Elements */
        .corner-decoration {
            position: absolute;
            width: 120px;
            height: 120px;
            opacity: 0.1;
            z-index: 0;
        }

        .corner-top-left {
            top: 0;
            left: 0;
            background: radial-gradient(circle, var(--primary-color) 10%, transparent 20%);
        }

        .corner-top-right {
            top: 0;
            right: 0;
            background: radial-gradient(circle, var(--secondary-color) 10%, transparent 20%);
        }

        .corner-bottom-left {
            bottom: 0;
            left: 0;
            background: radial-gradient(circle, var(--accent-color) 10%, transparent 20%);
        }

        .corner-bottom-right {
            bottom: 0;
            right: 0;
            background: radial-gradient(circle, var(--primary-color) 10%, transparent 20%);
        }

/* MODERN 3D INSPIRED PLANT LOVE TREE STYLES */
.plant-container {
    display: flex;
    flex-direction: column;
    gap: 25px;
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
}

.plant-header {
    text-align: center;
    margin-bottom: 25px;
    padding: 40px 30px;
    background: linear-gradient(135deg, rgba(34, 139, 34, 0.15), rgba(50, 205, 50, 0.08));
    border-radius: 25px;
    border: 3px solid rgba(34, 139, 34, 0.3);
    box-shadow: 0 15px 35px rgba(34, 139, 34, 0.3),
                0 0 40px rgba(50, 205, 50, 0.1) inset,
                0 0 30px rgba(255, 255, 255, 0.2);
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(10px);
}

.plant-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 20% 80%, rgba(50, 205, 50, 0.2) 0%, transparent 70%),
                radial-gradient(circle at 80% 20%, rgba(34, 139, 34, 0.2) 0%, transparent 70%);
    z-index: 0;
}

.plant-title {
    color: var(--plant-color);
    font-size: 2.5rem;
    font-weight: 800;
    margin-bottom: 15px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1),
                 0 0 10px rgba(50, 205, 50, 0.5);
    position: relative;
    z-index: 1;
    background: linear-gradient(45deg, #228B22, #32CD32);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: glow 2s ease-in-out infinite alternate;
}

@keyframes glow {
    from {
        text-shadow: 0 0 10px rgba(50, 205, 50, 0.5),
                     0 0 20px rgba(50, 205, 50, 0.3),
                     0 0 30px rgba(50, 205, 50, 0.2);
    }
    to {
        text-shadow: 0 0 20px rgba(50, 205, 50, 0.8),
                     0 0 30px rgba(50, 205, 50, 0.5),
                     0 0 40px rgba(50, 205, 50, 0.3);
    }
}

.plant-subtitle {
    color: #666;
    font-size: 1.2rem;
    line-height: 1.6;
    position: relative;
    z-index: 1;
}

.tree-container {
    position: relative;
    text-align: center;
    margin: 30px 0;
    padding: 50px 40px;
    background: linear-gradient(135deg, rgba(249, 255, 249, 0.95), rgba(232, 245, 232, 0.95));
    border-radius: 30px;
    border: 5px solid #c8e6c9;
    min-height: 400px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    box-shadow: 0 25px 50px rgba(34, 139, 34, 0.3),
                0 15px 35px rgba(34, 139, 34, 0.2) inset,
                0 0 40px rgba(255, 255, 255, 0.5);
    backdrop-filter: blur(5px);
    transform-style: preserve-3d;
    perspective: 1000px;
}

.tree-container::before {
    content: '';
    position: absolute;
    top: -5px;
    left: -5px;
    right: -5px;
    bottom: -5px;
    background: linear-gradient(45deg, 
        rgba(50, 205, 50, 0.1) 0%, 
        rgba(34, 139, 34, 0.2) 50%, 
        rgba(50, 205, 50, 0.1) 100%);
    border-radius: 35px;
    z-index: -1;
    animation: borderGlow 3s ease-in-out infinite alternate;
}

@keyframes borderGlow {
    0% {
        opacity: 0.3;
        box-shadow: 0 0 20px rgba(50, 205, 50, 0.3);
    }
    100% {
        opacity: 0.7;
        box-shadow: 0 0 40px rgba(50, 205, 50, 0.6);
    }
}

.tree-stage {
    font-size: 8rem;
    margin-bottom: 25px;
    transition: all 0.5s ease;
    filter: drop-shadow(5px 5px 10px rgba(0,0,0,0.3))
            drop-shadow(0 0 20px rgba(50, 205, 50, 0.5));
    animation: float3D 6s ease-in-out infinite;
    transform-style: preserve-3d;
}

@keyframes float3D {
    0%, 100% {
        transform: translateY(0px) rotateX(0deg) rotateY(0deg);
    }
    25% {
        transform: translateY(-10px) rotateX(5deg) rotateY(5deg);
    }
    50% {
        transform: translateY(-5px) rotateX(-5deg) rotateY(-5deg);
    }
    75% {
        transform: translateY(-10px) rotateX(5deg) rotateY(-5deg);
    }
}

.tree-name {
    font-size: 2.2rem;
    color: var(--plant-color);
    font-weight: 800;
    margin-bottom: 20px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1),
                 0 0 10px rgba(50, 205, 50, 0.3);
    background: linear-gradient(45deg, #228B22, #32CD32, #228B22);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 200% 100%;
    animation: gradientShift 3s ease-in-out infinite;
}

@keyframes gradientShift {
    0%, 100% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
}

.tree-progress {
    width: 100%;
    max-width: 500px;
    background: #e0e0e0;
    height: 35px;
    border-radius: 20px;
    margin: 25px 0;
    overflow: hidden;
    position: relative;
    box-shadow: inset 0 5px 15px rgba(0,0,0,0.3),
                0 5px 15px rgba(0,0,0,0.1);
    border: 3px solid #c8e6c9;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, 
        #4CAF50, 
        #8BC34A, 
        #4CAF50,
        #8BC34A);
    background-size: 200% 100%;
    border-radius: 17px;
    transition: width 1s cubic-bezier(0.34, 1.56, 0.64, 1);
    position: relative;
    overflow: hidden;
    animation: progressShimmer 3s infinite linear;
}

@keyframes progressShimmer {
    0% {
        background-position: 200% 0;
    }
    100% {
        background-position: -200% 0;
    }
}

.progress-fill::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.6), 
        transparent);
    animation: shimmer 2s infinite;
}

.progress-text {
    font-size: 1.3rem;
    color: #555;
    font-weight: 700;
    margin-top: 15px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
}

.streak-info {
    display: flex;
    justify-content: space-around;
    background: linear-gradient(135deg, rgba(50, 205, 50, 0.2), rgba(34, 139, 34, 0.1));
    padding: 30px 25px;
    border-radius: 25px;
    margin: 20px 0;
    border: 3px solid rgba(50, 205, 50, 0.4);
    box-shadow: 0 15px 30px rgba(34, 139, 34, 0.2),
                0 0 30px rgba(50, 205, 50, 0.1) inset;
    backdrop-filter: blur(5px);
    transform-style: preserve-3d;
}

.streak-item {
    text-align: center;
    flex: 1;
    padding: 10px;
    position: relative;
    transition: all 0.3s ease;
}

.streak-item:hover {
    transform: translateY(-5px) scale(1.05);
}

.streak-item::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    width: 1px;
    height: 60%;
    background: rgba(50, 205, 50, 0.3);
    transform: translateY(-50%);
}

.streak-item:first-child::before {
    display: none;
}

.streak-number {
    font-size: 3rem;
    font-weight: 800;
    color: var(--plant-color);
    display: block;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1),
                 0 0 15px rgba(50, 205, 50, 0.3);
    animation: numberPulse 2s infinite;
}

@keyframes numberPulse {
    0%, 100% {
        transform: scale(1);
        text-shadow: 2px 2px 4px rgba(0,0,0,0.1),
                     0 0 15px rgba(50, 205, 50, 0.3);
    }
    50% {
        transform: scale(1.1);
        text-shadow: 3px 3px 6px rgba(0,0,0,0.2),
                     0 0 25px rgba(50, 205, 50, 0.5);
    }
}

.streak-label {
    font-size: 1rem;
    color: #666;
    font-weight: 700;
    margin-top: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.watering-section {
    text-align: center;
    margin: 25px 0;
    padding: 40px 30px;
    background: linear-gradient(135deg, rgba(33, 150, 243, 0.2), rgba(33, 150, 243, 0.1));
    border-radius: 30px;
    border: 3px solid rgba(33, 150, 243, 0.4);
    box-shadow: 0 20px 40px rgba(33, 150, 243, 0.3),
                0 0 40px rgba(33, 150, 243, 0.1) inset,
                0 0 30px rgba(255, 255, 255, 0.3);
    backdrop-filter: blur(5px);
    transform-style: preserve-3d;
}

.watering-title {
    color: #1976D2;
    font-size: 2rem;
    font-weight: 800;
    margin-bottom: 20px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1),
                 0 0 15px rgba(33, 150, 243, 0.3);
    background: linear-gradient(45deg, #1976D2, #2196F3, #1976D2);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 200% 100%;
    animation: waterGradient 3s ease-in-out infinite;
}

@keyframes waterGradient {
    0%, 100% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
}

.watering-btn {
    background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
    color: white;
    border: none;
    padding: 30px 60px;
    border-radius: 70px;
    font-size: 1.6rem;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    box-shadow: 0 20px 40px rgba(33, 150, 243, 0.5),
                0 5px 15px rgba(255, 255, 255, 0.3) inset,
                0 0 30px rgba(33, 150, 243, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    font-weight: 800;
    margin: 25px auto;
    position: relative;
    overflow: hidden;
    min-width: 350px;
    transform-style: preserve-3d;
}

.watering-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.4), 
        transparent);
    transition: 0.6s;
}

.watering-btn:hover::before {
    left: 100%;
}

.watering-btn:hover {
    transform: translateY(-12px) scale(1.1) rotateX(5deg);
    box-shadow: 0 30px 60px rgba(33, 150, 243, 0.7),
                0 0 50px rgba(33, 150, 243, 0.4);
}

.watering-btn:disabled {
    background: linear-gradient(135deg, #666, #999);
    cursor: not-allowed;
    transform: none;
    box-shadow: 0 10px 25px rgba(102, 102, 102, 0.3);
}

.watering-btn:disabled:hover {
    transform: none;
    box-shadow: 0 10px 25px rgba(102, 102, 102, 0.3);
}

.watering-btn:disabled::before {
    display: none;
}

.last-watered {
    color: #666;
    font-size: 1.2rem;
    margin-top: 25px;
    font-style: italic;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
}

.tree-messages {
    display: flex;
    flex-direction: column;
    gap: 25px;
    margin: 25px 0;
}

.tree-message {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(249, 249, 249, 0.95));
    padding: 25px 30px;
    border-radius: 25px;
    border-left: 10px solid #4CAF50;
    box-shadow: 0 15px 35px rgba(0,0,0,0.2),
                0 5px 15px rgba(76, 175, 80, 0.1) inset;
    animation: fadeIn 0.5s ease;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    backdrop-filter: blur(5px);
    transform-style: preserve-3d;
}

.tree-message:hover {
    transform: translateY(-10px) scale(1.02) rotateX(3deg);
    box-shadow: 0 20px 40px rgba(0,0,0,0.3),
                0 0 30px rgba(76, 175, 80, 0.2);
}

.tree-message-title {
    font-weight: 800;
    color: var(--plant-color);
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 15px;
    font-size: 1.3rem;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
}

.tree-message-content {
    color: #555;
    font-size: 1.15rem;
    line-height: 1.7;
}

.tree-stages {
    display: flex;
    justify-content: space-between;
    margin-top: 30px;
    padding: 25px;
    background: linear-gradient(135deg, rgba(249, 249, 249, 0.95), rgba(232, 245, 232, 0.95));
    border-radius: 25px;
    border: 3px solid rgba(224, 224, 224, 0.5);
    box-shadow: 0 15px 35px rgba(0,0,0,0.15),
                0 5px 15px rgba(255, 255, 255, 0.2) inset;
    backdrop-filter: blur(5px);
}

.stage-item {
    text-align: center;
    flex: 1;
    padding: 20px 15px;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    cursor: pointer;
    border-radius: 15px;
}

.stage-item:hover {
    transform: translateY(-8px) scale(1.1);
    background: rgba(255, 255, 255, 0.5);
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}

.stage-icon {
    font-size: 3rem;
    margin-bottom: 15px;
    transition: all 0.4s ease;
    filter: drop-shadow(3px 3px 5px rgba(0,0,0,0.2));
}

.stage-name {
    font-size: 1.1rem;
    color: #666;
    font-weight: 700;
    transition: all 0.4s ease;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.stage-active .stage-icon {
    color: var(--plant-color);
    transform: scale(1.5);
    filter: drop-shadow(0 0 15px rgba(50, 205, 50, 0.5));
    animation: stagePulse 2s infinite;
}

@keyframes stagePulse {
    0%, 100% {
        transform: scale(1.5);
        filter: drop-shadow(0 0 15px rgba(50, 205, 50, 0.5));
    }
    50% {
        transform: scale(1.7);
        filter: drop-shadow(0 0 25px rgba(50, 205, 50, 0.8));
    }
}

.stage-active .stage-name {
    color: var(--plant-color);
    font-weight: 800;
    font-size: 1.2rem;
    text-shadow: 0 0 10px rgba(50, 205, 50, 0.3);
}

.stage-completed .stage-icon {
    color: #4CAF50;
    filter: drop-shadow(0 0 10px rgba(76, 175, 80, 0.5));
}

.stage-completed .stage-name {
    color: #4CAF50;
    text-shadow: 0 0 5px rgba(76, 175, 80, 0.3);
}

.water-drop {
    position: absolute;
    width: 30px;
    height: 40px;
    background: linear-gradient(135deg, rgba(33, 150, 243, 0.9), rgba(25, 118, 210, 0.9));
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    animation: drop3D 0.8s ease-out forwards;
    pointer-events: none;
    z-index: 10;
    filter: drop-shadow(0 5px 10px rgba(33, 150, 243, 0.7))
            drop-shadow(0 0 20px rgba(33, 150, 243, 0.5));
    transform-style: preserve-3d;
}

@keyframes drop3D {
    0% {
        transform: translateY(-200px) rotateX(0deg) rotateY(0deg) scale(1);
        opacity: 1;
    }
    50% {
        transform: translateY(-100px) rotateX(180deg) rotateY(90deg) scale(1.2);
        opacity: 0.8;
    }
    100% {
        transform: translateY(0) rotateX(360deg) rotateY(180deg) scale(0);
        opacity: 0;
    }
}

.tree-growth-animation {
    animation: treeGrowth3D 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes treeGrowth3D {
    0% {
        transform: scale(1) rotateX(0deg) rotateY(0deg);
        filter: drop-shadow(5px 5px 10px rgba(0,0,0,0.3));
    }
    50% {
        transform: scale(1.5) rotateX(10deg) rotateY(10deg);
        filter: drop-shadow(0 0 40px rgba(50, 205, 50, 0.8));
    }
    100% {
        transform: scale(1) rotateX(0deg) rotateY(0deg);
        filter: drop-shadow(5px 5px 10px rgba(0,0,0,0.3));
    }
}

.countdown-section {
    text-align: center;
    margin: 30px 0;
    padding: 40px 30px;
    background: linear-gradient(135deg, rgba(156, 39, 176, 0.2), rgba(123, 31, 162, 0.1));
    border-radius: 30px;
    border: 3px solid rgba(156, 39, 176, 0.4);
    box-shadow: 0 20px 40px rgba(156, 39, 176, 0.3),
                0 0 40px rgba(156, 39, 176, 0.1) inset,
                0 0 30px rgba(255, 255, 255, 0.3);
    backdrop-filter: blur(5px);
}

.countdown-title {
    color: #9C27B0;
    font-size: 2rem;
    font-weight: 800;
    margin-bottom: 20px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1),
                 0 0 15px rgba(156, 39, 176, 0.3);
    background: linear-gradient(45deg, #9C27B0, #7B1FA2, #9C27B0);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 200% 100%;
    animation: countdownGradient 3s ease-in-out infinite;
}

@keyframes countdownGradient {
    0%, 100% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
}

.countdown-timer {
    display: flex;
    justify-content: center;
    gap: 25px;
    margin-top: 30px;
    flex-wrap: wrap;
}

.countdown-item {
    text-align: center;
    background: rgba(255, 255, 255, 0.95);
    padding: 25px 20px;
    border-radius: 25px;
    min-width: 120px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.3),
                0 5px 15px rgba(156, 39, 176, 0.2) inset;
    border: 4px solid #9C27B0;
    transform-style: preserve-3d;
    transition: all 0.3s ease;
    backdrop-filter: blur(5px);
}

.countdown-item:hover {
    transform: translateY(-10px) rotateX(5deg);
    box-shadow: 0 20px 40px rgba(156, 39, 176, 0.5),
                0 0 30px rgba(156, 39, 176, 0.3);
}

.countdown-number {
    font-size: 3rem;
    font-weight: 800;
    color: #9C27B0;
    display: block;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1),
                 0 0 20px rgba(156, 39, 176, 0.5);
    animation: countdownPulse 2s infinite;
}

@keyframes countdownPulse {
    0%, 100% {
        transform: scale(1);
        text-shadow: 2px 2px 4px rgba(0,0,0,0.1),
                     0 0 20px rgba(156, 39, 176, 0.5);
    }
    50% {
        transform: scale(1.1);
        text-shadow: 3px 3px 6px rgba(0,0,0,0.2),
                     0 0 30px rgba(156, 39, 176, 0.7);
    }
}

.countdown-label {
    font-size: 1.1rem;
    color: #666;
    font-weight: 700;
    margin-top: 15px;
    text-transform: uppercase;
    letter-spacing: 1.5px;
}

.goal-date {
    font-size: 1.5rem;
    color: #9C27B0;
    font-weight: 800;
    margin-top: 30px;
    background: rgba(156, 39, 176, 0.2);
    padding: 15px 30px;
    border-radius: 35px;
    display: inline-block;
    box-shadow: 0 10px 25px rgba(156, 39, 176, 0.3),
                0 0 20px rgba(156, 39, 176, 0.2);
    animation: goalPulse 3s infinite;
}

@keyframes goalPulse {
    0%, 100% {
        transform: scale(1);
        box-shadow: 0 10px 25px rgba(156, 39, 176, 0.3);
    }
    50% {
        transform: scale(1.05);
        box-shadow: 0 15px 35px rgba(156, 39, 176, 0.4);
    }
}

.achievements-section {
    margin: 30px 0;
    padding: 40px 30px;
    background: linear-gradient(135deg, rgba(255, 193, 7, 0.2), rgba(255, 160, 0, 0.1));
    border-radius: 30px;
    border: 3px solid rgba(255, 193, 7, 0.4);
    box-shadow: 0 20px 40px rgba(255, 193, 7, 0.3),
                0 0 40px rgba(255, 193, 7, 0.1) inset,
                0 0 30px rgba(255, 255, 255, 0.3);
    backdrop-filter: blur(5px);
}

.achievements-title {
    color: #FFA000;
    font-size: 2rem;
    font-weight: 800;
    margin-bottom: 30px;
    text-align: center;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1),
                 0 0 15px rgba(255, 160, 0, 0.3);
    background: linear-gradient(45deg, #FFA000, #FFC107, #FFA000);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 200% 100%;
    animation: achievementGradient 3s ease-in-out infinite;
}

@keyframes achievementGradient {
    0%, 100% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
}

.achievements-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 25px;
}

.achievement-card {
    background: rgba(255, 255, 255, 0.95);
    padding: 25px;
    border-radius: 25px;
    text-align: center;
    box-shadow: 0 15px 35px rgba(0,0,0,0.2),
                0 5px 15px rgba(255, 255, 255, 0.2) inset;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    border: 3px solid rgba(224, 224, 224, 0.5);
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(5px);
    transform-style: preserve-3d;
}

.achievement-card:hover {
    transform: translateY(-15px) rotateX(5deg) scale(1.05);
    box-shadow: 0 25px 50px rgba(0,0,0,0.3),
                0 0 40px rgba(255, 255, 255, 0.4);
}

.achievement-card.unlocked {
    border-color: #FFD700;
    background: linear-gradient(135deg, rgba(255, 249, 230, 0.95), rgba(255, 243, 204, 0.95));
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(255, 215, 0, 0.4),
                0 0 30px rgba(255, 215, 0, 0.2);
}

.achievement-card.unlocked:hover {
    transform: translateY(-20px) rotateX(10deg) scale(1.1);
    box-shadow: 0 30px 60px rgba(255, 215, 0, 0.5),
                0 0 50px rgba(255, 215, 0, 0.3);
}

.achievement-icon {
    font-size: 3rem;
    margin-bottom: 20px;
    color: #999;
    transition: all 0.4s ease;
    filter: drop-shadow(3px 3px 5px rgba(0,0,0,0.2));
}

.achievement-card.unlocked .achievement-icon {
    color: #FFD700;
    filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.5));
    transform: scale(1.3);
    animation: achievementGlow 2s infinite;
}

@keyframes achievementGlow {
    0%, 100% {
        filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.5));
        transform: scale(1.3);
    }
    50% {
        filter: drop-shadow(0 0 30px rgba(255, 215, 0, 0.8));
        transform: scale(1.4);
    }
}

.achievement-name {
    font-size: 1.2rem;
    font-weight: 800;
    color: #333;
    margin-bottom: 15px;
    line-height: 1.4;
}

.achievement-desc {
    font-size: 0.95rem;
    color: #666;
    line-height: 1.5;
}

/* Enhanced 3D Water Drop Animation */
.water-drop-animation {
    position: absolute;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 5;
}

.water-drop-3d {
    position: absolute;
    width: 40px;
    height: 50px;
    background: linear-gradient(135deg, 
        rgba(33, 150, 243, 0.9) 0%, 
        rgba(25, 118, 210, 0.9) 50%, 
        rgba(33, 150, 243, 0.7) 100%);
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    animation: waterDropFall 1.5s ease-out forwards;
    pointer-events: none;
    z-index: 10;
    filter: drop-shadow(0 5px 15px rgba(33, 150, 243, 0.8))
            drop-shadow(0 0 25px rgba(33, 150, 243, 0.6));
    transform-style: preserve-3d;
}

@keyframes waterDropFall {
    0% {
        transform: translateY(-100vh) rotateX(0deg) rotateY(0deg) scale(1);
        opacity: 1;
    }
    30% {
        transform: translateY(-50vh) rotateX(180deg) rotateY(180deg) scale(1.3);
        opacity: 0.9;
    }
    70% {
        transform: translateY(0) rotateX(360deg) rotateY(360deg) scale(0.8);
        opacity: 0.7;
    }
    100% {
        transform: translateY(100vh) rotateX(540deg) rotateY(540deg) scale(0);
        opacity: 0;
    }
}

        /* Success message styles */
        .success-message {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 20px 30px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            box-shadow: 0 12px 25px rgba(76, 175, 80, 0.5);
            animation: fadeInOut 3s forwards;
            position: fixed;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            max-width: 90%;
            font-weight: 600;
            font-size: 1.1rem;
        }

        @keyframes fadeInOut {
            0% {
                opacity: 0;
                transform: translateX(-50%) translateY(-20px);
            }
            20% {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
            80% {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
            100% {
                opacity: 0;
                transform: translateX(-50%) translateY(-20px);
            }
        }

        /* Undo message styles */
        .undo-message {
            background: linear-gradient(135deg, #2196F3, #1976D2);
            color: white;
            padding: 20px 30px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            box-shadow: 0 12px 25px rgba(33, 150, 243, 0.5);
            animation: fadeInOut 5s forwards;
            position: fixed;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            max-width: 90%;
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.1rem;
        }

        .undo-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.5);
            color: white;
            padding: 8px 18px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .undo-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.08);
        }

        /* Save data button */
        .save-data-btn {
            background: linear-gradient(135deg, #2196F3, #1976D2);
            color: white;
            border: none;
            padding: 18px 35px;
            border-radius: 15px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 10px 25px rgba(33, 150, 243, 0.5);
            margin: 20px auto;
        }

        .save-data-btn:hover {
            background: linear-gradient(135deg, #1976D2, #2196F3);
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(33, 150, 243, 0.6);
        }

        .save-data-btn:active {
            transform: translateY(-2px);
        }

        /* Loading indicator styles */
        .loading-indicator {
            background: linear-gradient(135deg, #2196F3, #1976D2);
            color: white;
            padding: 20px 30px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            box-shadow: 0 12px 25px rgba(33, 150, 243, 0.5);
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2000;
            max-width: 90%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* NEW: Special Date Section */
        .special-date-section {
            text-align: center;
            margin: 30px 0;
            padding: 30px;
            background: linear-gradient(135deg, rgba(255, 107, 139, 0.15), rgba(255, 142, 158, 0.08));
            border-radius: 25px;
            border: 3px solid rgba(255, 107, 139, 0.3);
            box-shadow: 0 15px 35px rgba(255, 107, 139, 0.2);
        }

        .special-date-title {
            color: var(--primary-color);
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .special-date-text {
            font-size: 1.3rem;
            color: #666;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .special-date-highlight {
            font-size: 1.5rem;
            color: var(--primary-color);
            font-weight: 800;
            background: rgba(255, 107, 139, 0.15);
            padding: 10px 25px;
            border-radius: 25px;
            display: inline-block;
            margin: 10px 0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .content {
                padding: 30px 25px;
            }
            
            .timeline::before {
                left: 20px;
            }
            
            .timeline-item {
                margin-left: 50px;
                width: calc(100% - 50px);
            }
            
            .timeline-item::before {
                left: -45px;
                width: 20px;
                height: 20px;
            }
            
            .form-buttons {
                flex-direction: column;
            }
            
            .delete-modal-buttons {
                flex-direction: column;
            }
            
            .memory-stats {
                flex-direction: column;
                gap: 20px;
            }
            
            .timeline-actions {
                flex-direction: column;
            }
            
            .photo-actions {
                flex-direction: column;
            }
            
            .reason-card {
                padding: 25px;
            }
            
            .reason-title {
                font-size: 1.3rem;
            }
            
            .diary-entry {
                padding: 25px;
            }
            
            .diary-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 20px;
            }
            
            /* UPDATED MOOD SELECTION FOR MOBILE */
            .mood-selection {
                gap: 10px;
                justify-content: center;
            }
            
            .mood-option {
                font-size: 2rem;
                padding: 12px;
                min-width: 60px;
                min-height: 60px;
            }
            
            .tree-stage {
                font-size: 4.5rem;
            }
            
            .streak-info {
                flex-direction: column;
                gap: 20px;
            }
            
            .tree-stages {
                flex-wrap: wrap;
            }
            
            .stage-item {
                flex: 0 0 calc(50% - 10px);
                margin-bottom: 15px;
            }
            
            .countdown-timer {
                gap: 15px;
            }
            
            .countdown-item {
                min-width: 80px;
                padding: 15px;
            }
            
            .countdown-number {
                font-size: 1.8rem;
            }
            
            .achievements-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .watering-btn {
                padding: 20px 35px;
                font-size: 1.3rem;
                min-width: 250px;
            }
            
            /* FIXED: Mobile diary content */
            .diary-content {
                -webkit-line-clamp: 3;
                max-height: 5.4em;
            }
            
            /* FIXED: Mobile timeline content */
            .timeline-item p {
                -webkit-line-clamp: 2;
                max-height: 3.4em;
            }
            
            /* FIXED: Mobile reason content */
            .reason-description {
                -webkit-line-clamp: 2;
                max-height: 3.6em;
            }
        }

        @media (min-width: 768px) {
            .timeline::before {
                left: 50%;
                transform: translateX(-50%);
            }
            
            .timeline-item {
                width: 48%;
                margin: 45px 0;
            }
            
            .timeline-item:nth-child(odd) {
                margin-left: 0;
                margin-right: auto;
            }
            
            .timeline-item:nth-child(even) {
                margin-left: auto;
                margin-right: 0;
            }
            
            .timeline-item::before {
                left: auto;
                right: -62px;
            }
            
            .timeline-item:nth-child(even)::before {
                left: -62px;
                right: auto;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 15px;
            }
            
            .container {
                border-radius: 20px;
                border-width: 5px;
            }
            
            .header {
                padding: 30px 20px;
            }
            
            .content {
                padding: 25px 20px;
            }
            
            .page {
                padding: 20px;
            }
            
            .form-container {
                padding: 20px;
            }
            
            .reason-header {
                flex-direction: column;
                gap: 20px;
                align-items: flex-start;
            }
            
            .reason-actions {
                flex-direction: column;
            }
            
            .diary-actions {
                flex-direction: column;
            }
            
            .tree-stage {
                font-size: 3.5rem;
            }
            
            .watering-btn {
                padding: 18px 30px;
                font-size: 1.2rem;
                min-width: 220px;
            }
            
            .stage-item {
                flex: 0 0 100%;
            }
            
            .countdown-item {
                min-width: 70px;
                padding: 12px;
            }
            
            .countdown-number {
                font-size: 1.5rem;
            }
            
            .achievements-grid {
                grid-template-columns: 1fr;
            }
            
            /* FIXED: Smaller screens diary content */
            .diary-content {
                -webkit-line-clamp: 2;
                max-height: 3.6em;
            }
            
            /* FIXED: Smaller screens timeline content */
            .timeline-item p {
                -webkit-line-clamp: 2;
                max-height: 3.4em;
            }
            
            /* FIXED: Smaller screens reason content */
            .reason-description {
                -webkit-line-clamp: 2;
                max-height: 3.6em;
            }
        }

        /* UPDATED MOOD SELECTION STYLES - SIMILAR TO 10 REASONS */
        .mood-selection {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .mood-option {
            font-size: 2.5rem;
            cursor: pointer;
            padding: 15px;
            border-radius: 15px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.5);
            border: 3px solid #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 70px;
            min-height: 70px;
        }

        .mood-option:hover {
            transform: scale(1.15);
            background: rgba(255, 107, 139, 0.1);
            border-color: var(--primary-color);
        }

        .mood-option.selected {
            background: rgba(255, 107, 139, 0.2);
            border-color: var(--primary-color);
            transform: scale(1.2);
            box-shadow: 0 0 15px rgba(255, 107, 139, 0.3);
        }

        /* NEW: CUSTOM EMOJI INPUT STYLES */
        .custom-emoji-container {
            margin-bottom: 15px;
        }

        .emoji-input-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .emoji-input {
            font-size: 2rem;
            width: 80px;
            height: 70px;
            text-align: center;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.5);
            transition: all 0.3s ease;
        }

        .emoji-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 107, 139, 0.2);
        }

        .emoji-help {
            color: #666;
            font-size: 0.9rem;
            margin-top: 5px;
            text-align: center;
        }

        .emoji-help span {
            background: #f0f0f0;
            padding: 2px 8px;
            border-radius: 10px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Decorative Corner Elements -->
        <div class="corner-decoration corner-top-left"></div>
        <div class="corner-decoration corner-top-right"></div>
        <div class="corner-decoration corner-bottom-left"></div>
        <div class="corner-decoration corner-bottom-right"></div>
        
        <!-- Home Page -->
        <div id="home-page" class="page active">
            <div class="header">
                <div class="floating-hearts" id="floating-hearts"></div>
                <h1 class="title">Our Love Journey</h1>
                <p class="subtitle">Celebrating our beautiful moments together, every step of the way. This is our story.</p>
            </div>
            
            <div class="content">
                <div class="love-quote">
                    "Every love story is beautiful, but ours is my favorite"
                </div>
                
                <div class="highlight-section">
                    <div class="highlight-title">Beautiful Memories Together</div>
                    <div class="highlight-text">I love You Shang</div>
                </div>
                
                <div class="menu-buttons">
                    <button class="menu-btn" onclick="showPage('timeline-page')">
                        <i class="fas fa-book-open"></i>
                        Our Story Timeline
                    </button>
                    <button class="menu-btn completed" onclick="showPage('reasons-page')">
                        <i class="fas fa-heart"></i>
                        10 Reasons Why I Love You
                    </button>
                    <button class="menu-btn diary" onclick="showPage('diary-page')">
                        <i class="fas fa-book"></i>
                        Our Diary
                    </button>
                    <!-- Plant Love Tree -->
                    <button class="menu-btn plant" onclick="showPage('plant-page')">
                        <i class="fas fa-seedling"></i>
                        Our Plant Love Tree
                    </button>
                </div>
                
                <div class="memory-stats">
                    <div class="stat-item">
                        <span class="stat-number"><i class="fas fa-heart"></i></span>
                        <span class="stat-label">Memories</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number"><i class="fas fa-heart"></i></span>
                        <span class="stat-label">Special Days</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number"><i class="fas fa-heart"></i></span>
                        <span class="stat-label">Love</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Timeline Page -->
        <div id="timeline-page" class="page">
            <div class="content">
                <button class="back-btn" onclick="showPage('home-page')">
                    <i class="fas fa-arrow-left"></i> Back to Home
                </button>
                <h1 class="page-title">Our Love Story</h1>
                <p class="page-subtitle">Click on each milestone to read more about our beautiful journey together</p>
                
                <div class="highlight-section">
                    <div class="highlight-title">Create New Memory</div>
                    <div class="highlight-text">Capture your special moments and add them to our timeline</div>
                </div>
                
                <div class="add-memory-card" onclick="showAddEntryForm()">
                    <i class="fas fa-plus-circle add-memory-icon"></i>
                    <div class="add-memory-text">Add New Memory</div>
                </div>

                <button class="save-data-btn" onclick="saveToDevice()">
                    <i class="fas fa-download"></i> Save Our Love Story
                </button>
                
                <div class="timeline" id="timeline-container">
                    <!-- Timeline items will be dynamically added here -->
                </div>
            </div>
        </div>
        
        <!-- 10 Reasons Why I Love You Page -->
        <div id="reasons-page" class="page">
            <div class="content">
                <button class="back-btn" onclick="showPage('home-page')">
                    <i class="fas fa-arrow-left"></i> Back to Home
                </button>
                <h1 class="page-title">10 Reasons Why I Love You</h1>
                <p class="page-subtitle">These are just a few of the countless reasons why you mean the world to me</p>
                
                <div class="highlight-section">
                    <div class="highlight-title">My Heart's Truth</div>
                    <div class="highlight-text">Every reason comes from a special place in my heart</div>
                </div>

                <button class="save-reasons-btn" onclick="saveReasonsToDevice()">
                    <i class="fas fa-download"></i> Save My Reasons
                </button>
                
                <div class="reasons-container" id="reasons-container">
                    <!-- Reasons will be dynamically added here -->
                </div>
                
                <div class="love-quote">
                    "You are my today and all of my tomorrows"
                </div>
            </div>
        </div>
        
        <!-- Diary Page -->
        <div id="diary-page" class="page">
            <div class="content">
                <button class="back-btn" onclick="showPage('home-page')">
                    <i class="fas fa-arrow-left"></i> Back to Home
                </button>
                <h1 class="page-title">Our Diary</h1>
                <p class="page-subtitle">Personal thoughts and moments from our journey together</p>
                
                <div class="special-date-section">
                    <div class="special-date-title">Our Special Date</div>
                    <p class="special-date-text">Every diary entry is a precious memory we share</p>
                    <div class="special-date-highlight">Click on any diary entry to read more</div>
                </div>

                <button class="save-data-btn" onclick="saveDiaryToDevice()">
                    <i class="fas fa-download"></i> Save Our Diary
                </button>
                
                <div class="diary-stats">
                    <div class="diary-stat-item">
                        <span class="diary-stat-number" id="diary-count">0</span>
                        <span class="diary-stat-label"></span>
                    </div>
                    <div class="diary-stat-item">
                        <span class="diary-stat-number" id="diary-mood"></span>
                        <span class="diary-stat-label"></span>
                    </div>
                    <div class="diary-stat-item">
                        <span class="diary-stat-number" id="diary-streak">0</span>
                        <span class="diary-stat-label"></span>
                    </div>
                </div>
                
                <div class="add-diary-card" onclick="showAddDiaryForm()">
                    <i class="fas fa-plus-circle add-diary-icon"></i>
                    <div class="add-diary-text">Add New Diary Entry</div>
                </div>
                
                <div class="diary-container" id="diary-container">
                    <!-- Diary entries will be dynamically added here -->
                </div>
                
                <div class="love-quote">
                    "The best love stories are written in the quiet moments"
                </div>
            </div>
        </div>
        
        <!-- Plant Love Tree Page -->
        <div id="plant-page" class="page">
            <div class="content">
                <button class="back-btn" onclick="showPage('home-page')">
                    <i class="fas fa-arrow-left"></i> Back to Home
                </button>
                <h1 class="page-title">Our Plant Love Tree</h1>
                <p class="page-subtitle">Diligan ang ating pag-ibig araw-araw at panatilihin ang streak hanggang December 13, 2026!</p>
                
                <!-- Special Date Section for Plant Tree -->
                <div class="special-date-section">
                    <div class="special-date-title"> Special Journey Starts December 13, 2025</div>
                    <p class="special-date-text">Ang ating pag-ibig ay magsisimula mula December 13, 2025 hanggang December 13, 2026</p>
                    <div class="special-date-highlight"> One Year of Love and Growth</div>
                </div>
                
                <div class="plant-container">
                    <div class="plant-header">
                        <h2 class="plant-title"> Ang Ating Pag-ibig ay Tulad ng Halaman</h2>
                        <p class="plant-subtitle">Kailangan ng araw-araw na pagdilig ng pagmamahal at pag-aalaga. Magsisimula sa December 13, 2025!</p>
                    </div>
                    
                    <div class="tree-container" id="tree-container">
                        <div class="tree-stage" id="tree-stage"></div>
                        <div class="tree-name" id="tree-name">Maghintay sa December 13, 2025</div>
                        <div class="tree-progress">
                            <div class="progress-fill" id="progress-fill" style="width: 0%;"></div>
                        </div>
                        <div class="progress-text" id="progress-text">Maghintay para sa ating special date!</div>
                    </div>
                    
                    <div class="streak-info">
                        <div class="streak-item">
                            <span class="streak-number" id="current-streak">0</span>
                            <span class="streak-label">Araw na Sunod-sunod</span>
                        </div>
                        <div class="streak-item">
                            <span class="streak-number" id="total-watered">0</span>
                            <span class="streak-label">Kabuuang Pagdilig</span>
                        </div>
                        <div class="streak-item">
                            <span class="streak-number" id="tree-level">0</span>
                            <span class="streak-label">Antas ng Halaman</span>
                        </div>
                        <div class="streak-item">
                            <span class="streak-number" id="chances-left">5</span>
                            <span class="streak-label">Chance na Natitira</span>
                        </div>
                    </div>
                    
                    <div class="watering-section">
                        <h3 class="watering-title"> Maghintay sa December 13, 2025</h3>
                        <p>Ang pagdilig ay magsisimula sa December 13, 2025. Maghintay para sa ating special na araw!</p>
                        
                        <button class="watering-btn" id="water-btn" onclick="waterTree()" style="background: linear-gradient(135deg, #666, #999);">
                            <i class="fas fa-clock"></i> Maghintay sa December 13, 2025
                        </button>
                        
                        <p class="last-watered" id="last-watered">Ang pagdilig ay magsisimula sa December 13, 2025</p>
                    </div>
                    
                    <div class="countdown-section">
                        <h3 class="countdown-title"> Countdown sa Pagsisimula ng Pag-ibig</h3>
                        <p>Ang ating journey ay magsisimula sa:</p>
                        
                        <div class="countdown-timer" id="countdown-timer">
                            <div class="countdown-item">
                                <span class="countdown-number" id="countdown-days">000</span>
                                <span class="countdown-label">Days</span>
                            </div>
                            <div class="countdown-item">
                                <span class="countdown-number" id="countdown-hours">00</span>
                                <span class="countdown-label">Hours</span>
                            </div>
                            <div class="countdown-item">
                                <span class="countdown-number" id="countdown-minutes">00</span>
                                <span class="countdown-label">Minutes</span>
                            </div>
                            <div class="countdown-item">
                                <span class="countdown-number" id="countdown-seconds">00</span>
                                <span class="countdown-label">Seconds</span>
                            </div>
                        </div>
                        
                        <div class="goal-date"> Magsisimula sa: December 13, 2025</div>
                    </div>
                    
                    <div class="tree-stages">
                        <div class="stage-item stage-active">
                            <div class="stage-icon"></div>
                            <div class="stage-name">Maghintay</div>
                        </div>
                        <div class="stage-item">
                            <div class="stage-icon"></div>
                            <div class="stage-name">Binhi</div>
                        </div>
                        <div class="stage-item">
                            <div class="stage-icon"></div>
                            <div class="stage-name">Usbong</div>
                        </div>
                        <div class="stage-item">
                            <div class="stage-icon">
</div>
                            <div class="stage-name">Halaman</div>
                        </div>
                        <div class="stage-item">
                            <div class="stage-icon"></div>
                            <div class="stage-name">Puno ng Pag-ibig</div>
                        </div>
                    </div>
                    
                    <div class="tree-messages" id="tree-messages">
                        <div class="tree-message">
                            <div class="tree-message-title"><i class="fas fa-info-circle"></i> Maligayang Pagdating!</div>
                            <div class="tree-message-content">Ang ating Plant Love Tree ay magsisimula sa December 13, 2025. Maghintay para sa ating special journey ng pag-ibig.</div>
                        </div>
                    </div>
                    
                    <div class="achievements-section">
                        <h3 class="achievements-title"> Mga Future Achievement</h3>
                        <div class="achievements-grid" id="achievements-grid">
                            <!-- Achievements will be dynamically added here -->
                        </div>
                    </div>

                    <button class="save-data-btn" onclick="savePlantData()" style="background: linear-gradient(135deg, var(--plant-color), #32CD32);">
                        <i class="fas fa-download"></i> I-save ang Ating Halaman
                    </button>
                    
                    <!-- Reset Plant Button -->
                    <button class="save-data-btn" onclick="resetPlant()" style="background: linear-gradient(135deg, #f44336, #d32f2f);">
                        <i class="fas fa-redo"></i> I-reset ang Halaman
                    </button>
                </div>
                
                <div class="love-quote">
                    "Ang pag-ibig ay hindi lang damdamin, ito ay pang-araw-araw na pagpili at pagsisikap"
                </div>
            </div>
        </div>
        
        <!-- Add/Edit Entry Page -->
        <div id="add-entry-page" class="page">
            <div class="content">
                <button class="back-btn" onclick="showPage('timeline-page')">
                    <i class="fas fa-arrow-left"></i> Back to Timeline
                </button>
                <h1 class="page-title" id="form-title">Add New Memory</h1>
                <p class="page-subtitle">Capture a special moment in our journey together</p>
                
                <div class="form-container">
                    <input type="hidden" id="entry-id">
                    <div class="form-group">
                        <label class="form-label" for="entry-title">Memory Title</label>
                        <input type="text" id="entry-title" class="form-input" placeholder="e.g., Our First Trip Together">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="entry-date">Date</label>
                        <input type="text" id="entry-date" class="form-input" placeholder="e.g., June 2023">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="entry-description">Description</label>
                        <textarea id="entry-description" class="form-textarea" placeholder="Tell the story of this special moment..."></textarea>
                    </div>
                    
                    <!-- Current Photo Display (for editing) -->
                    <div class="current-photo-container" id="current-photo-container" style="display: none;">
                        <span class="current-photo-label">Current Photo:</span>
                        <img id="current-photo" class="current-photo" src="" alt="Current photo">
                        <div class="photo-action-buttons">
                            <button type="button" class="action-btn change-photo" onclick="document.getElementById('entry-image').click()">
                                <i class="fas fa-sync-alt"></i> Change Photo
                            </button>
                            <button type="button" class="action-btn remove-photo" onclick="removeCurrentPhoto()">
                                <i class="fas fa-trash"></i> Remove Photo
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="entry-image">
                            <i class="fas fa-camera"></i> 
                            <span id="photo-label">Add a Photo</span> (Optional)
                        </label>
                        <input type="file" id="entry-image" class="form-input" accept="image/*">
                        <small style="color: #666; margin-top: 5px; display: block;">You can add a photo that captures this memory</small>
                    </div>
                    
                    <div class="form-buttons">
                        <button class="btn btn-secondary" onclick="showPage('timeline-page')">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                        <button class="btn btn-primary" onclick="saveTimelineEntry()">
                            <i class="fas fa-save"></i> Save Memory
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Add/Edit Diary Entry Page - UPDATED WITH NEW MOOD SELECTION -->
        <div id="add-diary-page" class="page">
            <div class="content">
                <button class="back-btn" onclick="showPage('diary-page')">
                    <i class="fas fa-arrow-left"></i> Back to Diary
                </button>
                <h1 class="page-title" id="diary-form-title">Add New Diary Entry</h1>
                <p class="page-subtitle">Write down your thoughts, feelings, and special moments</p>
                
                <div class="form-container">
                    <input type="hidden" id="diary-id">
                    
                    <div class="form-group">
                        <label class="form-label">How are you feeling today?</label>
                        <div class="mood-selection" id="mood-selection">
                            <div class="mood-option selected" data-mood="" onclick="selectMood('')"></div>
                            <div class="mood-option" data-mood="" onclick="selectMood('')"></div>
                            <div class="mood-option" data-mood="" onclick="selectMood('')"></div>
                            <div class="mood-option" data-mood="" onclick="selectMood('')"></div>
                            <div class="mood-option" data-mood="" onclick="selectMood('')"></div>
                            <div class="mood-option" data-mood="" onclick="selectMood('')"></div>
                            <div class="mood-option" data-mood="" onclick="selectMood('')"></div>
                            <div class="mood-option" data-mood="" onclick="selectMood('')"></div>
                            <div class="mood-option" data-mood="" onclick="selectMood('')"></div>
                            <div class="mood-option" data-mood="" onclick="selectMood('')"></div>
                        </div>
                        <input type="hidden" id="diary-mood-input" value="">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="diary-title">Entry Title</label>
                        <input type="text" id="diary-title" class="form-input" placeholder="e.g., A Perfect Day Together">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="diary-date">Date</label>
                        <input type="text" id="diary-date" class="form-input" placeholder="e.g., Today, March 15, 2024">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="diary-content">Your Thoughts</label>
                        <textarea id="diary-content" class="form-textarea" placeholder="Write about your day, your feelings, or anything you want to remember..." rows="8"></textarea>
                    </div>
                    
                    <div class="form-buttons">
                        <button class="btn btn-secondary" onclick="showPage('diary-page')">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                        <button class="btn btn-primary" onclick="saveDiaryEntry()" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));">
                            <i class="fas fa-save"></i> Save Entry
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Timeline Modal -->
        <div id="timeline-modal" class="modal">
            <div class="modal-content">
                <span class="close-modal" onclick="closeTimelineModal()"></span>
                <span class="save-modal" onclick="saveCurrentStory()" title="Save this story to your device">
                    <i class="fas fa-download"></i>
                </span>
                <h2 id="modal-title">Timeline Story</h2>
                <img id="modal-image" src="" alt="" style="display: none;">
                <p id="modal-description">Click on a timeline item to see its full story.</p>
                
                <!-- Photo actions in modal -->
                <div class="photo-actions" id="modal-photo-actions" style="display: none; margin-top: 20px;">
                    <button class="action-btn change-photo" onclick="changePhotoFromModal()">
                        <i class="fas fa-sync-alt"></i> Change Photo
                    </button>
                    <button class="action-btn remove-photo" onclick="removePhotoFromModal()">
                        <i class="fas fa-trash"></i> Remove Photo
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Reason Modal -->
        <div id="reason-modal" class="modal">
            <div class="reason-modal-content">
                <span class="close-modal" onclick="closeReasonModal()"></span>
                <h2 id="reason-modal-title">Reason Title</h2>
                <div class="reason-number-large" id="reason-modal-number">1</div>
                <div id="reason-modal-emoji"></div>
                <p id="reason-modal-description">Reason description will appear here.</p>
            </div>
        </div>
        
        <!-- Diary Modal -->
        <div id="diary-modal" class="modal">
            <div class="diary-modal-content">
                <span class="close-modal" onclick="closeDiaryModal()"></span>
                <div class="diary-modal-header">
                    <div class="diary-modal-date" id="diary-modal-date">
                        <i class="far fa-calendar"></i> <span id="diary-modal-date-text">Today</span>
                    </div>
                    <div class="diary-modal-mood" id="diary-modal-mood"></div>
                </div>
                <h2 id="diary-modal-title">Diary Entry Title</h2>
                <p id="diary-modal-content">Diary content will appear here.</p>
            </div>
        </div>
        
        <!-- Delete Confirmation Modal -->
        <div id="delete-confirm-modal" class="modal">
            <div class="delete-modal-content">
                <h2 class="delete-modal-title">
                    <i class="fas fa-exclamation-triangle"></i> Confirm Delete
                </h2>
                <p class="delete-modal-message">Are you sure you want to delete this memory? This action cannot be undone.</p>
                <div class="delete-modal-buttons">
                    <button class="delete-cancel-btn" onclick="closeDeleteModal()">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                    <button class="delete-confirm-btn" id="confirm-delete-btn">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Delete Diary Confirmation Modal -->
        <div id="delete-diary-modal" class="modal">
            <div class="delete-modal-content">
                <h2 class="delete-modal-title">
                    <i class="fas fa-exclamation-triangle"></i> Delete Diary Entry
                </h2>
                <p class="delete-modal-message">Are you sure you want to delete this diary entry? This action cannot be undone.</p>
                <div class="delete-modal-buttons">
                    <button class="delete-cancel-btn" onclick="closeDeleteDiaryModal()">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                    <button class="delete-confirm-btn" id="confirm-diary-delete-btn">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                </div>
            </div>
        </div>
        
        <div class="footer">
            Made with <i class="fas fa-heart"></i> for you, today and always
        </div>
    </div>

    <script>
        /* ALL YOUR EXISTING FUNCTIONS REMAIN THE SAME */
        // Timeline data
        let timelineStories = [];
        let editingIndex = -1;
        let deleteIndex = -1;
        let currentStoryIndex = -1;
        let deletedStory = null;

        // Reasons data
        let loveReasons = [];
        let currentReasonIndex = -1;

        // Diary Data
        let diaryEntries = [];
        let editingDiaryIndex = -1;
        let currentDiaryIndex = -1;
        let deleteDiaryIndex = -1;
        let deletedDiary = null;
        let currentMood = '';

        // Plant Love Tree Data - MODIFIED FOR DECEMBER 13, 2025 START DATE
        let plantData = {
            currentStage: 0, // 0: Waiting, 1: Seed, 2: Sprout, 3: Small Plant, 4: Tree, 5: Love Tree
            growthProgress: 0, // Start at 0% until December 13, 2025
            currentStreak: 0,
            totalWatered: 0,
            lastWatered: null,
            treeName: "Maghintay sa December 13, 2025",
            treeEmoji: "",
            messages: [],
            achievements: [],
            chancesLeft: 5,
            startDate: "2025-12-13", // December 13, 2025 - START DATE
            goalDate: "2026-12-13", // December 13, 2026 - END DATE
            creationDate: new Date().toISOString(),
            isAlive: false, // Not alive until start date
            canWater: false // Cannot water until start date
        };

        const treeStages = [
            { emoji: "", name: "Maghintay sa Pagsisimula", minProgress: 0, maxProgress: 0 },
            { emoji: "", name: "Binhi ng Pag-ibig", minProgress: 1, maxProgress: 20 },
            { emoji: "", name: "Usbong ng Pag-ibig", minProgress: 21, maxProgress: 40 },
            { emoji: "", name: "Halaman ng Pag-ibig", minProgress: 41, maxProgress: 60 },
            { emoji: "", name: "Puno ng Pag-ibig", minProgress: 61, maxProgress: 80 },
            { emoji: "", name: "Maluwalhating Puno ng Pag-ibig", minProgress: 81, maxProgress: 100 }
        ];

        const achievementList = [
            { id: "first_water", name: "Unang Pagdilig", desc: "Nagbigay ng unang patak ng pagmamahal", icon: "" },
            { id: "three_day", name: "Tatlong Araw na Sunod", desc: "Tatlong araw na patuloy na pagdilig", icon: "" },
            { id: "week_streak", name: "Isang Linggong Pagmamahal", desc: "Pitong araw na walang patid na pag-aalaga", icon: "" },
            { id: "month_streak", name: "Buwan ng Pag-ibig", desc: "30 araw na patuloy na pagsisikap", icon: "" },
            { id: "sprout", name: "Unang Usbong", desc: "Nakita ang unang usbong ng pag-ibig", icon: "" },
            { id: "plant", name: "Lumalaking Pag-ibig", desc: "Ang pag-ibig ay naging halaman", icon: "" },
            { id: "tree", name: "Puno ng Pag-ibig", desc: "Ang pag-ibig ay naging puno", icon: "" },
            { id: "love_tree", name: "Maluwalhating Puno", desc: "Ang pag-ibig ay naging ganap na puno", icon: "" },
            { id: "50_days", name: "50 Araw ng Pagmamahal", desc: "50 araw na patuloy na pagdilig", icon: "" },
            { id: "100_days", name: "100 Araw ng Katapatan", desc: "100 araw na walang patid na pagsisikap", icon: "" },
            { id: "one_year", name: "Isang Taon ng Pag-ibig", desc: "365 araw na patuloy na pag-aalaga", icon: "" },
            { id: "goal_reached", name: "Naabot ang Goal!", desc: "Naabot ang December 13, 2026!", icon: "" }
        ];

        // Check if current date is on or after December 13, 2025
        function canStartWatering() {
            const startDate = new Date(plantData.startDate);
            const now = new Date();
            return now >= startDate;
        }

        // Calculate days until December 13, 2025 (START DATE)
        function calculateDaysUntilStart() {
            const startDate = new Date(plantData.startDate);
            const today = new Date();
            const timeDiff = startDate.getTime() - today.getTime();
            const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));
            return daysDiff > 0 ? daysDiff : 0;
        }

        // Calculate days until December 13, 2026 (END DATE)
        function calculateDaysUntilGoal() {
            const goalDate = new Date(plantData.goalDate);
            const today = new Date();
            const timeDiff = goalDate.getTime() - today.getTime();
            const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));
            return daysDiff > 0 ? daysDiff : 0;
        }

        // Calculate daily growth needed (only after start date)
        function calculateDailyGrowthNeeded() {
            if (!canStartWatering()) return 0;
            
            const daysUntilGoal = calculateDaysUntilGoal();
            const remainingGrowth = 100 - plantData.growthProgress;
            
            if (daysUntilGoal <= 0) return 0;
            
            return remainingGrowth / daysUntilGoal;
        }

        // Calculate growth per watering (only after start date)
        function calculateGrowthPerWatering() {
            if (!canStartWatering()) return 0;
            
            const dailyGrowthNeeded = calculateDailyGrowthNeeded();
            const baseGrowth = 0.5;
            
            let streakBonus = 0;
            if (plantData.currentStreak >= 7) streakBonus += 0.2;
            if (plantData.currentStreak >= 30) streakBonus += 0.5;
            if (plantData.currentStreak >= 100) streakBonus += 1;
            
            let totalBonus = Math.min(plantData.totalWatered * 0.01, 1);
            
            return Math.min(baseGrowth + streakBonus + totalBonus + dailyGrowthNeeded, 3);
        }

        // Initialize timeline from localStorage
        function initializeTimeline() {
            const savedStories = localStorage.getItem('loveJourneyTimeline');
            if (savedStories) {
                timelineStories = JSON.parse(savedStories);
            } else {
                // Default stories including "How We Met"
                timelineStories = [
                    {
                        title: "Unang Pagkikita",
                        date: "Unang araw ng klase",
                        description: " Mula sa unang pagkakataon na makita ka, ikaw na agad ang pumasok sa aking mundo. Nahumaling ako sa iyong buhok mong mahaba at kulay pula na tila sobrang bango, pananamit, at ang banayad na paraan ng iyong pagkilos. Ang iyong tahimik na personalidad at pagiging mahiyain ay lalong nagpatingkad ng iyong pagkaganda at nagpabilis sa tibok ng aking puso. Alam kong isa lamang akong estranghero sa iyong mga mata. Ngunit sa unang saglit pa lamang, ang puso ko'y nahulog na. Noon, takot akong lumapit. Iniisip ko na baka iniwasan mo ako, kaya hindi ako naglakas-loob. Ngunit simula noong araw na iyon, hindi ko na maalis sa isipan at paningin ang iyong larawan. Sa tuwing makikita ka, parang nabibigyan ng liwanag at buhay ang aking mundo. Sa tuwing papalapit ka, nararamdaman ko ang kaba at ligaya. Alam kong bawat sulyap ko ay nagsasabi ng lihim kong paghanga, ngunit hindi ko ito mapigilansapagkat sa bawat pagkikita, ikaw ang nagiging buo ng aking araw. ",
                        image: "",
                        tags: ["First Meeting", "Special Connection", "Destiny"]
                    },
                    {
                        title: "Mga duman na klase kasama ka",
                        date: "Klase",
                        description: "Tuwing papasok ako sa paaralan, hindi ko maiwasang maging excited. Ito ay isang panibagong arawisang panibagong pagkakataon upang muling masilayan ka. Kagaya ng dati, palihim kitang sinisilayan. At sa tuwing ginagawa ko ito, hindi ka nagpapabigo. Sa aking mga mata, napakaganda mo, at ang liwanag ng iyong mukha ang nagbibigay-buoy sa aking maghapon. Kahit na natatakpan ito ng facemask, kitang-kita at litaw na litaw pa rin ang kagandahan mong dulot ng iyong mga mata at ang kaligayahan mong nadarama. Sa pag-uwi, ikaw agad ang hinahanap ng aking paningin. Inaalam ko kung nakalabas ka na, at kung sino ang iyong mga kasabay. Bawat sandali ng iyong presensya ay nagbibigay ng kakaibang init sa aking puso. ",
                        image: "",
                        tags: ["Happy", "Good day", "Best moments"]
                    },
                    {
                        title: "Groupings",
                        date: "Best part",
                        description: "Sa tuwing naggroupings tayo non, palagi kong pinagdarasal na sana makagroup tayo na sana makasama kita at hindi ako binigo ng tandhana at nangyare nga unang beses kitang nakagrupo at isa pa sa pinaka mahigpit nating teacher si Ms.Pia. Kinakabahan ako non at diko alam ang gagawin pero kasabay non sobrang saya ko dahil mapapalapit ako sayo. Dumating ang araw na may groupings tayo at napili kang reporter sobrang kaba ko non para sayo pero alam kong kaya mo yan at hindi nga ako nabigo dahil sobrang galing mo magreport at sobrang proud ako sayo. Mula non mas lalo pa kitang na admire dahil sa talino mo at sa galing mo maghandle ng pressure. Pagkatapos ng araw na yon mas lalo pa kitang nakilala at na appreciate dahil sa mga bagay na hindi ko pa nakikita sayo.",
                        image: "",
                        tags: ["Excitement", "Commitment", "Butterflies"]
                    },
                    {
                        title: "Seatmate",
                        date: "Violet",
                        description: "Hindi ako handa dito nung oras ng drafting at nagkaroon tayo ng seating arrangement, sobrang nagulat ako at sobrang saya at diko mapigilan mahiya non dahil ang pinagdarasal ko lang naman non is mapunta ako sa pweseto kung saan mas madali kitang makikita at para masulyapan kaso sobra sobra ang binigay ni lord sa akin, dahil tinabi at pinalapit kapa ng sobra sakin. Dapat hindi mangyayare yun kung hindi ako nag cr buti nalang talga nag cr ako and sobrang thankful ako non dahil sobrang ganda ng naging seating arrangement. Simula nung nag-aral ako ayun ang pinaka magandang seating arrangement ang naranasan ko.",
                        image: "",
                        tags: ["Inlove", "Shy", "Memories"]
                    },
                    {
                        title: "Drafting",
                        date: "Valentina",
                        description: "Noong araw na may project tayo sa Drafting, hindi sa wala kaming magawan non, nagkunwari lang akong wala kaming magagawan non dahil para makasama sainyo and para makita ka, hindi naman ako nagsisi dahil sobrang saya non. Sa tuwing tumatawa ka sa mga joke ko diko mapigilan kiligin at iniisip ko na sana mas tumagal pa ang oras para mas matagal pa kitang makasama. Pinagmamasdan ko kung paano ka gumawa at napamangha ako dahil sa linis at maganda mong mga gawa non, halos hindi na ako makapag focus sa ginagwa ko dahil sobrang saya kong panoorin ka. Dumating ako sa point na sasabihn ko na sayo na gusto kita kaso andon pa ang mga kaibigan natin and gusto ko ikaw lang ang makarinig ng mga sasabihin ko. One time nung umuwi ka dahil gabi na nadulas si diego at nasabing may gusto ako sayo at narinig ni alliah at sinabing, 'gusto mo ba walang pang boyfriend yung' nung narinig ko yan sobrang saya ko at hindi kona matago yung saya ko non dahil sa nalaman ko. Diko alam kung naalala mo pa 'to yung mogu mogu na ininuman mo at hindi mo naubos ay ininuman ko mismo kung saan ka uminom para magkaindrect kiss ako sayo, pag uwi ko non sobrang saya ko sa mga nangyare at iniisip ko yung mga nangyare sa araw na yun at hindi ko makakalimutan dahil isa ito sa mga pinakamasasayang araw sa buhay ko.",
                        image: "",
                        tags: ["Inlove", "Indirectkiss", "Memories"]
                    },
                    {
                        title: "First Chat",
                        date: "December, 01, 2023",
                        description: "December 1, 2023, Eto yung araw na naglakas loob akong magchat sayo at kausapin ka. Eto rin yung araw na pinaka nabaliw ako dahil sa kilig dahil nagreply ka at diko alam sasabihin ko, diko alam itatopic ko, kaya naman kung ano ano sinabi ko non para mapahaba usapan. Meron pa yung pinahulaan ko kung sinong crush ko pero ang totoo ikaw ang tinutukoy ko sa mga hint ko non, nung sinabi mong ikaw, gustong gusto ko nang sabihin oo ikaw ikaw ang gusto ko, pero may pumigil sakin and naisip ko hindi pa 'to ang oras kaya naman tinuloy ko lang ang pangungulit ko at nung sumapit ang gabi na dapat maglalaro tayo kaso tinulugan mo'ko, ang gabing yun ang pinaka magandang gabi sa buhay ko.",
                        image: "",
                        tags: ["Best", "Move", "Ready"]
                    },
                    {
                        title: "Groupings2",
                        date: "Best part2",
                        description:  "Kung tanda mo pa eto yung second groupings natin sa filipino, eto yung video mismo alam mo ba sobrang excited ako non and nung time na nagvivideo tayo about sa vigan, nung time kona hindi ako makafocus non kasi ikaw mismo nag vivideo at phone mo mismo ang gamit kaya hindi ako makafocus non. Eto rin yung araw na sinabi kona sayo na ikaw ang gusto ko. Nung time na yun sobrang nabaliw ako at kinakabahan sa sagot mo kaya naman ilang minuto akong tulala at nagdarasal sa sagot mo, nung medyo nakabawi bawi na ako agad ko inopen phone ko at dahan-dahan kong sinisilip chat mo at laking tuwa ko non nung hindi moko pinagtabuyan kaya naman sobrang saya ko.",
                        image: "",
                        tags: ["Excitement", "Commitment", "Butterflies"]
                    },
                     {
                        title: "ML",
                        date: "Always",
                        description: "Dumating sa point na lagi kitang niyayaya mag ml dahil, gusto kong magpapansin at kunin ang oras mo at para magkaroon din tayo ng time para sa isa't isa. Sa totoo lang palusot ko lang yung ml para makasama at makabonding ka pero yun ang naging way para mas makilalak kita at para mas magustuhan kita.",
                        image: "",
                        tags: ["Enjoy", "Bestplayever", "Gaming"]
                    },
                     {
                        title: "OJT",
                        date: "First talk",
                        description: "Eto yung ojt ako at nagtatampo kana sakin non dahil hindi kita kinakausap sa school, kaya naman gumawa ako ng paraan habang break kami at may pasok ka pinuntahan kita sa may labas at bago ako pumunta sayo bumili muna ako ng mogu mogu dahil nabanggit mo sakin na gusto mo ng mogu mog at chocolate dahin nabanggit mo rin sakin na mahilig ka sa mga chocolate at may exam ka non kaya binigyan kita chocolate, kaso hindi ikaw ang kumain dahil hindi ka pala mahilig sa dark chocolate si ashly ang kumain haysss. Nung makita mo ako sobrang saya ko non at sobrang kilig ko dahil sa wakas nakapunta na ako sayo at nakapagsimula na tayo ng usapan. Nung time na yun sobrang saya ko at hindi ko makakalimutan yung mga nangyare non dahil isa ito sa mga pinakamasayang araw sa buhay ko. Alam mo ba ang resibo non, nasa bulsa ko pa hindi ko tinatapon dahil nagpapaalala sakin yun nang masasayang nangyare sa araw na yun.",
                        image: "",
                        tags: ["Reciecpt", "Mogu-Mogu", "Chocolate"]
                    },
                     {
                        title: "Officialy",
                        date: "April 11, 2024",
                        description: "Eto yung araw na hindi ko alam na may mangyayare na sobrang ganda, Habang pauwi tayo nagyaya ka muna tumambay at diko alam may mangyayare palang pantitrip non, niloloko mo pa akong ayaw ng mama mo at pinapalayo ka sakin alam mo bang paiyak na ako non, buti nalang yung susunod na sinabi mo maganda. Pagkatapos nong pangtitrip mo yung sunod na sinabi mo ang nagpatigil sakin at hindi makapaniwala,dahil sa dami dami ng nangyare at sa haba haba ng pnahon na tumagal ng almost 4 months na panliligaw sa wakas narinig ko rin ang salitang ' tayo na sinasagot na kita' nung narinig ko yun sobrang saya ko at tumigil ang mundo ko hindi ako makapaniwala na sa wakas pagkatapos ng mga nangyare sa wakas napasagot ko rin siya. Alam mo ba pagtapos natin magusap at nakasakay kana tinakbo ko yung verdant hanggang kila jed dahil may project pa tayong gagawin non na coffee painting. Alam mo kahit pinagtitripan nila ako non wala akong pake dahil ang nasa isip ko lang tayo na at sobrang kinikilig ako non. Sobrang saya ko nung mga araw na yun at buong araw lang ako nakangiti, kahit ngayon pag naaalala ko napapangiti ako ng sobra dahil sobrang saya ng mga nangyare.",
                        image: "",
                        tags: ["Excitement", "Commitment", "Butterflies"]
                    },
                     {
                        title: "Break up",
                     date: "July 08, 2024",
                          description: "Alam mo eto yung worst na araw ko pero at the same time nagturo at nagpaalam ng pagkukulang ko sayo. Sobrang sakit ng naramdaman ko non pero kailangan ko tanggapin na may mga bagay talaga na hindi natin kontrolado at kailangan natin tanggapin. Sa kabila ng sakit na naramdaman ko, natutunan kong maging mas matatag at mas maunawain. Natutunan kong mahalin ang sarili ko kahit na may mga pagkukulang ako. Natutunan kong pahalagahan ang mga magagandang alaala natin at gamitin ito bilang inspirasyon para sa mas magandang hinaharap. Alam kong hindi madali ang lahat ng ito, pero naniniwala ako na sa bawat pagsubok ay may aral na matututunan at may lakas na makukuha. Alam kong hindi rin naging madali sayo ang mga nangyare at sobrang sakit para sayo at para sa akin. Eto yung nagparealize ng sobra na hindi ka basta basta sa buhay ko at kung mabibigyan man ako ng pagkakataon itatama ko lahat ng pagkakamali ko at pupunan ko ang pagkukulang ko sayo. Ayaw kona ulit maranasan ang gantong sakit at mawala ang pinakamahalaga sabuhay ko.",
                        image: "",
                     
                        tags: ["sad", "loss", "cry"]
                    },
                     {
                        title: "Comeback",
                         date: "December 13, 2024",
                          description: "Pagkatapos ng lahat ng pagsusumikap sa wakas nabigyan ulit ng pagkakataon at maraming salamat sa tiwalang binigay mo sa akin, hindi ko na ulit hahayaan mawala ang isang tulad mo sa buhay ko kaya naman ipaparamdam ko ang pagmamahal na hindi ko naparamdam noon. Babe ngayon 1 year na tayo, alam ko hindi ko nakwento lahat pero mananatili yun sa mga alaala ko dahil ang makilala ka ang pinakamagandang nangyare sa buhay ko. Mahal na mahal kita higit pa sa iniisip mo Babe. I love you so much",
                        image: "",
                        tags: ["Excitement", "Commitment", "Butterflies"]
                    },
                ];
                saveTimelineToStorage();
            }
            
            renderTimeline();
            updateStats();
        }

        // Initialize reasons from localStorage - ensure we always have 10
        function initializeReasons() {
            const savedReasons = localStorage.getItem('loveJourneyReasons');
            if (savedReasons) {
                loveReasons = JSON.parse(savedReasons);
                
                // Ensure we have exactly 10 reasons
                if (loveReasons.length !== 10) {
                    while (loveReasons.length < 10) {
                        loveReasons.push(getDefaultReason(loveReasons.length + 1));
                    }
                    if (loveReasons.length > 10) {
                        loveReasons = loveReasons.slice(0, 10);
                    }
                    saveReasonsToStorage();
                }
            } else {
                // Default reasons - exactly 10
                loveReasons = [
                    {
                        reason: "Hair",
                        description: "Buhok mong agaw pansin na kulay pula na sobrang bango. Parang gusto ko laging amuyin at hawakan. Halata kung paano pahalagahan at kung gaano ka responsable sa buhok mo palang.",
                        emoji: "",
                        color: "#FFD700"
                    },
                    {
                        reason: "Quite",
                        description: "Ang pagiging tahimik mo na may halong misteryo. Parang gusto kitang kilalanin ng mas malalim at alamin ang mga kwento sa likod ng iyong mga mata.",
                        emoji: "",
                        color: "#9C6BFF"
                    },
                    {
                        reason: "Pananamit",
                        description: "Ang iyong sense of style na simple pero elegant. Palaging napapansin ko kung paano mo pinipili ang iyong mga damit at accessories na bagay sa iyong personalidad.",
                        emoji: "",
                        color: "#FF6B8B"
                    },
                    {
                        reason: "Make up",
                        description: "Ang galing mo sa pag-aayos ng iyong sarili. Napapansin ko kung paano mo ginagamit ang make up para ipakita ang iyong natural na ganda at personalidad.",
                        emoji: "",
                        color: "#4A90E2"
                    },
                    {
                        reason: "Masipag",
                        description: "Ang iyong dedikasyon sa pag-aaral at sa mga bagay na mahalaga sa iyo. Nakaka-inspire kung paano mo hinaharap ang mga hamon at patuloy na nagsusumikap para sa iyong mga pangarap. Hindi lang sa pag aaral kundi pati na rin sa mga gawawing bahay, kita kung gaano ka kabusisi at kasipag mag-ayos ng mga bagay bagay.",
                        emoji: "",
                        color: "#FF8E9E"
                    },
                    {
                        reason: "Matalino",
                        description: "Ang iyong talino at katalinuhan na palaging humahanga ako. Gustung-gusto kong makipag-usap sa iyo dahil palagi kang may mga interesting na insights at perspectives sa iba't ibang bagay. Napapaisip ako at natututo sa bawat pag-uusap natin. Hindi lang sa academics kundi pati na rin sa mga simpleng bagay sa buhay, kitang kita kung gaano ka katalino.",
                        emoji: "",
                        color: "#FFD700"
                    },
                    {
                        reason: "Strong Personality",
                        description: "Ang malakas mo pagniniwala ay lubos na nagpapahanga sa akin, dahil kung sa tingin mo inaabuso ka hindi ka basta basta nagpapatalo at handa ka palaging lumaban at gumanti. Lubos akong humahanga sa ugali mong yan.",
                        emoji: "",
                        color: "#9C6BFF"
                    },
                    {
                        reason: "Mabango",
                        description: "Ang bango mo na para bang laging may dalang bulaklak. Parang gusto ko laging amuyin ang iyong presensya dahil nagbibigay ito ng kakaibang saya at ginhawa sa akin.",
                        emoji: "",
                        color: "#FF6B8B"
                    },
                    {
                        reason: "Smile",
                        description: "Ang ngiti mo na kayang magpasaya ng buong araw ko. Kapag ngumiti ka, parang nawawala ang lahat ng problema at stress sa paligid ko. Ang iyong ngiti ay isang liwanag na nagbibigay-inspirasyon sa akin na maging mas positibo at masaya sa buhay.",
                        emoji: "",
                        color: "#4A90E2"
                    },
                    {
                        reason: "Family Oriented",
                        description: "Ang pagmamahal at pagpapahalaga mo sa iyong pamilya. Nakikita ko kung gaano ka kaalaga at maalalahanin sa kanila, at ito ay isang katangian na lubos kong hinahangaan sa iyo. Ang iyong dedikasyon sa iyong pamilya ay nagpapakita ng iyong tunay na puso at pagmamahal. Kahit na madalas ay ayaw mo sakanila kita ko parin at napapansin ko parin kung paano mo sila pahalagahan at mahalin.",
                        emoji: "",
                        color: "#FF8E9E"
                    }
                ];
                saveReasonsToStorage();
            }
            
            renderReasons();
        }

        // Initialize diary from localStorage
        function initializeDiary() {
            const savedDiary = localStorage.getItem('loveJourneyDiary');
            if (savedDiary) {
                try {
                    diaryEntries = JSON.parse(savedDiary);
                } catch (e) {
                    console.error("Error parsing diary data:", e);
                    diaryEntries = [];
                }
            } else {
                // Default diary entries
                diaryEntries = [
                    {
                        title: "DIARY",
                        date: "The Beginning",
                        content: "Babe, Alam ko kung gaano kahirap sayo ang bawat araw at kung hindi mo pa kayang ikwento lahat saakin pwede mong ilagay lahat dito ng hinahin at mga nangyare sayo ito ay isang diary na kung saan ikaw lang ang nakakaalam at kahit ako hindi ko malalaman dahil ginawa ko ito para sayo lang.",
                        mood: ""
                    }
                ];
                saveDiaryToStorage();
            }
            
            renderDiary();
            updateDiaryStats();
        }

        // Initialize plant from localStorage
        function initializePlant() {
            const savedPlant = localStorage.getItem('loveJourneyPlant');
            if (savedPlant) {
                try {
                    const parsed = JSON.parse(savedPlant);
                    plantData = parsed;
                    
                    // Check if we can start watering
                    checkStartDate();
                    
                    // Initialize countdown timer to START DATE
                    updateCountdownTimer();
                    setInterval(updateCountdownTimer, 1000);
                    
                    // Update display
                    updatePlantDisplay();
                    updateStageIndicators();
                    renderAchievements();
                    
                    // Check for streak reset (only if started)
                    if (canStartWatering()) {
                        checkForStreakReset();
                    }
                    
                } catch (e) {
                    console.error("Error parsing plant data:", e);
                    initializeNewPlant();
                }
            } else {
                initializeNewPlant();
            }
        }

        // Initialize new plant
        function initializeNewPlant() {
            // RESET ALL DATA TO ZERO
            plantData = {
                currentStage: 0,
                growthProgress: 0,
                currentStreak: 0,
                totalWatered: 0,
                lastWatered: null,
                treeName: "Maghintay sa December 13, 2025",
                treeEmoji: "",
                messages: [{
                    title: " Maligayang pagdating sa ating Plant Love Tree!",
                    content: "Ang ating journey ng pag-ibig ay magsisimula sa December 13, 2025. Maghintay para sa ating special na araw!"
                }],
                achievements: [],
                chancesLeft: 5,
                startDate: "2025-12-13",
                goalDate: "2026-12-13",
                creationDate: new Date().toISOString(),
                isAlive: false,
                canWater: false
            };
            
            // Save to storage
            savePlantToStorage();
            
            // Initialize countdown timer to START DATE
            updateCountdownTimer();
            setInterval(updateCountdownTimer, 1000);
            
            // Update display
            updatePlantDisplay();
            updateStageIndicators();
            renderAchievements();
        }

        // Function to reset plant manually
        function resetPlant() {
            if (confirm("Sigurado ka bang gusto mong i-reset ang Plant Love Tree? Mawawala ang lahat ng progress mo.")) {
                localStorage.removeItem('loveJourneyPlant');
                initializeNewPlant();
                showSuccessMessage("Na-reset ang Plant Love Tree! Maghintay sa December 13, 2025.");
            }
        }

        // Check if start date has arrived
        function checkStartDate() {
            if (canStartWatering()) {
                // Start date has arrived!
                plantData.isAlive = true;
                plantData.canWater = true;
                plantData.treeName = "Binhi ng Pag-ibig";
                plantData.treeEmoji = "";
                plantData.growthProgress = 1; // Start at 1%
                plantData.currentStage = 1;
                
                plantData.messages.push({
                    title: " NAGSIMULA NA ANG ATING JOURNEY!",
                    content: "December 13, 2025 na! Maaari mo nang diligan ang ating halaman ng pag-ibig araw-araw hanggang December 13, 2026!"
                });
                
                savePlantToStorage();
                updatePlantDisplay();
                
                showSuccessMessage("Nagsimula na ang ating Plant Love Tree journey! Maaari mo nang diligan ang halaman.");
            }
        }

        // Update plant display
        function updatePlantDisplay() {
            // Update tree stage and name based on progress
            let currentStageIndex = 0;
            for (let i = treeStages.length - 1; i >= 0; i--) {
                if (plantData.growthProgress >= treeStages[i].minProgress) {
                    currentStageIndex = i;
                    break;
                }
            }
            
            plantData.currentStage = currentStageIndex;
            plantData.treeEmoji = treeStages[currentStageIndex].emoji;
            plantData.treeName = treeStages[currentStageIndex].name;
            
            // Update UI elements
            const treeStage = document.getElementById('tree-stage');
            treeStage.textContent = plantData.treeEmoji;
            document.getElementById('tree-name').textContent = plantData.treeName;
            
            // Update progress bar
            const progressFill = document.getElementById('progress-fill');
            progressFill.style.width = plantData.growthProgress + '%';
            
            // Update progress text
            const progressText = document.getElementById('progress-text');
            let progressMessage = "";
            
            if (!canStartWatering()) {
                progressMessage = "Maghintay para sa ating special date sa December 13, 2025!";
            } else {
                progressMessage = plantData.growthProgress + '% na lumago';
                
                // Add motivational message based on progress
                if (plantData.growthProgress < 10) {
                    progressMessage += ' - Simula pa lang!';
                } else if (plantData.growthProgress < 30) {
                    progressMessage += ' - Patuloy na lumalago!';
                } else if (plantData.growthProgress < 60) {
                    progressMessage += ' - Mahusay!';
                } else if (plantData.growthProgress < 90) {
                    progressMessage += ' - Malapit na!';
                } else {
                    progressMessage += ' - Kamangha-mangha!';
                }
            }
            
            progressText.textContent = progressMessage;
            
            // Update stats
            document.getElementById('current-streak').textContent = plantData.currentStreak;
            document.getElementById('total-watered').textContent = plantData.totalWatered;
            document.getElementById('tree-level').textContent = plantData.currentStage;
            document.getElementById('chances-left').textContent = plantData.chancesLeft;
            
            // Update last watered time
            if (plantData.lastWatered) {
                const lastWateredDate = new Date(plantData.lastWatered);
                const now = new Date();
                const diffHours = Math.floor((now - lastWateredDate) / (1000 * 60 * 60));
                
                let timeText = "";
                if (diffHours < 24) {
                    if (diffHours === 0) {
                        const diffMinutes = Math.floor((now - lastWateredDate) / (1000 * 60));
                        timeText = diffMinutes + " minuto ang nakalipas";
                    } else {
                        timeText = diffHours + " oras ang nakalipas";
                    }
                } else {
                    const diffDays = Math.floor(diffHours / 24);
                    timeText = diffDays + " araw ang nakalipas";
                }
                
                document.getElementById('last-watered').textContent = "Huling dinilig: " + timeText;
            } else {
                if (canStartWatering()) {
                    document.getElementById('last-watered').textContent = "Huling dinilig: Hindi pa nadidiligan";
                } else {
                    document.getElementById('last-watered').textContent = "Ang pagdilig ay magsisimula sa December 13, 2025";
                }
            }
            
            // Update water button
            const waterBtn = document.getElementById('water-btn');
            if (!canStartWatering()) {
                waterBtn.disabled = true;
                waterBtn.innerHTML = '<i class="fas fa-clock"></i> Maghintay sa December 13, 2025';
                waterBtn.style.background = 'linear-gradient(135deg, #666, #999)';
            } else {
                // Check if already watered today
                if (plantData.lastWatered) {
                    const lastWateredDate = new Date(plantData.lastWatered);
                    const lastWateredDay = lastWateredDate.toDateString();
                    const today = new Date().toDateString();
                    
                    if (lastWateredDay === today) {
                        waterBtn.disabled = true;
                        waterBtn.innerHTML = '<i class="fas fa-check"></i> Nadilig Na Ngayon';
                    } else {
                        waterBtn.disabled = false;
                        waterBtn.innerHTML = '<i class="fas fa-tint"></i> Diligan ang Halaman';
                    }
                } else {
                    waterBtn.disabled = false;
                    waterBtn.innerHTML = '<i class="fas fa-tint"></i> Diligan ang Halaman';
                }
                
                waterBtn.style.background = 'linear-gradient(135deg, #2196F3, #1976D2)';
                
                // If plant is dead, show different button
                if (!plantData.isAlive) {
                    waterBtn.disabled = true;
                    waterBtn.innerHTML = '<i class="fas fa-skull-crossbones"></i> Halaman ay Patay';
                }
            }
            
            // Update messages
            updateMessagesDisplay();
            
            // Update stage indicators
            updateStageIndicators();
        }

        // Update stage indicators
        function updateStageIndicators() {
            const stageItems = document.querySelectorAll('.stage-item');
            stageItems.forEach((item, index) => {
                item.classList.remove('stage-active', 'stage-completed');
                
                if (index < plantData.currentStage) {
                    item.classList.add('stage-completed');
                } else if (index === plantData.currentStage) {
                    item.classList.add('stage-active');
                }
            });
        }

        // Update countdown timer to START DATE
        function updateCountdownTimer() {
            const startDate = new Date(plantData.startDate);
            const now = new Date();
            const timeDiff = startDate.getTime() - now.getTime();
            
            if (timeDiff > 0) {
                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);
                
                document.getElementById('countdown-days').textContent = days.toString().padStart(3, '0');
                document.getElementById('countdown-hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('countdown-minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('countdown-seconds').textContent = seconds.toString().padStart(2, '0');
            } else {
                // Start date reached!
                document.getElementById('countdown-days').textContent = "000";
                document.getElementById('countdown-hours').textContent = "00";
                document.getElementById('countdown-minutes').textContent = "00";
                document.getElementById('countdown-seconds').textContent = "00";
                
                // Update display if not already updated
                if (!canStartWatering()) {
                    checkStartDate();
                }
            }
        }

        // Water the tree (only after start date)
        function waterTree() {
            if (!canStartWatering()) {
                const daysUntilStart = calculateDaysUntilStart();
                showSuccessMessage("Ang pagdilig ay magsisimula sa December 13, 2025. " + daysUntilStart + " araw na lang ang hihintayin!");
                return;
            }
            
            if (!plantData.isAlive) {
                showSuccessMessage("Ang halaman ay patay na. Gamitin ang iyong mga chance para buhayin muli!");
                return;
            }
            
            const now = new Date();
            const waterBtn = document.getElementById('water-btn');
            
            // Check if already watered today
            if (plantData.lastWatered) {
                const lastWateredDate = new Date(plantData.lastWatered);
                const lastWateredDay = lastWateredDate.toDateString();
                const today = now.toDateString();
                
                if (lastWateredDay === today) {
                    showSuccessMessage("Nadilig na ang halaman ngayong araw!");
                    return;
                }
                
                // Check if streak continues
                const yesterday = new Date(now);
                yesterday.setDate(yesterday.getDate() - 1);
                const yesterdayString = yesterday.toDateString();
                
                if (lastWateredDate.toDateString() === yesterdayString) {
                    plantData.currentStreak++;
                    
                    // Special achievements for streak milestones
                    if (plantData.currentStreak === 3) {
                        unlockAchievement("three_day");
                    } else if (plantData.currentStreak === 7) {
                        unlockAchievement("week_streak");
                    } else if (plantData.currentStreak === 30) {
                        unlockAchievement("month_streak");
                    } else if (plantData.currentStreak === 50) {
                        unlockAchievement("50_days");
                    } else if (plantData.currentStreak === 100) {
                        unlockAchievement("100_days");
                    } else if (plantData.currentStreak === 365) {
                        unlockAchievement("one_year");
                    }
                } else {
                    // Streak broken or new streak
                    plantData.currentStreak = 1;
                }
            } else {
                // First watering
                plantData.currentStreak = 1;
                unlockAchievement("first_water");
            }
            
            // Update plant data
            plantData.lastWatered = now.toISOString();
            plantData.totalWatered++;
            
            // Add growth points
            const growthPoints = calculateGrowthPerWatering();
            plantData.growthProgress = Math.min(100, plantData.growthProgress + growthPoints);
            
            // Check for stage upgrades
            checkStageUpgrade();
            
            // Add watering message
            const messages = [
                "Salamat sa pagdilig! Lumalago ang ating pag-ibig.",
                "Ang bawat patak ng pagdilig ay nagpapalago sa ating pagmamahalan.",
                "Napakaganda ng paglago ng ating halaman!",
                "Ang iyong pag-aalaga ay nakikita sa pagyabong ng ating pag-ibig.",
                "Patuloy na lumalago ang ating pag-ibig dahil sa iyong pagsisikap."
            ];
            
            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            plantData.messages.push({
                title: " Nadilig ang Halaman",
                content: randomMessage + " (+" + growthPoints.toFixed(1) + "% paglago, Streak: " + plantData.currentStreak + " araw)"
            });
            
            // Save and update
            savePlantToStorage();
            updatePlantDisplay();
            
            // Create water drop animation
            if (canStartWatering()) {
                createWaterDropAnimation();
                
                // Animate tree growth
                const treeStage = document.getElementById('tree-stage');
                treeStage.classList.add('tree-growth-animation');
                setTimeout(() => {
                    treeStage.classList.remove('tree-growth-animation');
                }, 800);
            }
            
            // Disable button for today
            if (waterBtn) {
                waterBtn.disabled = true;
                waterBtn.innerHTML = '<i class="fas fa-check"></i> Nadilig Na Ngayon';
            }
            
            // Show success message
            showSuccessMessage("Matagumpay na nadilig ang halaman! +" + growthPoints.toFixed(1) + "% paglago, Streak: " + plantData.currentStreak + " araw");
        }

        // Check for streak reset (only after start date)
        function checkForStreakReset() {
            if (!canStartWatering() || !plantData.lastWatered || !plantData.isAlive) return;
            
            const lastWateredDate = new Date(plantData.lastWatered);
            const now = new Date();
            const diffDays = Math.floor((now - lastWateredDate) / (1000 * 60 * 60 * 24));
            
            // If more than 1 day has passed since last watering, reduce chances
            if (diffDays > 1) {
                const daysMissed = diffDays - 1;
                plantData.chancesLeft = Math.max(0, plantData.chancesLeft - daysMissed);
                
                if (plantData.chancesLeft <= 0) {
                    plantData.isAlive = false;
                    plantData.messages.push({
                        title: " Nawalan ng Chance!",
                        content: "Naubos na ang iyong mga chance. Ang ating halaman ay natuyuan. Ngunit huwag mawalan ng pag-asa - simulan muli ang iyong pag-ibig!"
                    });
                } else {
                    plantData.currentStreak = 0;
                    plantData.messages.push({
                        title: " Na-break ang Streak!",
                        content: "Hindi ka nakapagbigay ng pagdilig kahapon. Nabawasan ang iyong chance. Natitira: " + plantData.chancesLeft + " chance. Patuloy na mag-alaga!"
                    });
                }
                
                savePlantToStorage();
                updatePlantDisplay();
            }
        }

        // Check for stage upgrade
        function checkStageUpgrade() {
            const oldStage = plantData.currentStage;
            
            // Determine new stage based on progress
            let newStageIndex = 0;
            for (let i = treeStages.length - 1; i >= 0; i--) {
                if (plantData.growthProgress >= treeStages[i].minProgress) {
                    newStageIndex = i;
                    break;
                }
            }
            
            if (newStageIndex > oldStage) {
                // Stage upgraded!
                plantData.messages.push({
                    title: " UMANGAT ANG ANTAS!",
                    content: "Ang ating halaman ay umangat mula " + treeStages[oldStage].name + " tungo sa " + treeStages[newStageIndex].name + "!"
                });
                
                // Unlock achievements for new stages
                if (newStageIndex >= 2) unlockAchievement("sprout");
                if (newStageIndex >= 3) unlockAchievement("plant");
                if (newStageIndex >= 4) unlockAchievement("tree");
                if (newStageIndex >= 5) unlockAchievement("love_tree");
                
                return true;
            }
            
            return false;
        }

        // Unlock achievement
        function unlockAchievement(achievementId) {
            if (plantData.achievements.includes(achievementId)) return;
            
            plantData.achievements.push(achievementId);
            const achievement = achievementList.find(a => a.id === achievementId);
            
            if (achievement) {
                plantData.messages.push({
                    title: " NATAMO ANG ACHIEVEMENT: " + achievement.name,
                    content: achievement.desc + "! Patuloy na mag-alaga at magmahal."
                });
                
                showSuccessMessage("Natamo ang achievement: " + achievement.name + "!");
                
                // Re-render achievements
                renderAchievements();
            }
        }

        // Render achievements
        function renderAchievements() {
            const container = document.getElementById('achievements-grid');
            container.innerHTML = '';
            
            achievementList.forEach(achievement => {
                const isUnlocked = plantData.achievements.includes(achievement.id);
                
                const achievementCard = document.createElement('div');
                achievementCard.className = `achievement-card ${isUnlocked ? 'unlocked' : ''}`;
                achievementCard.innerHTML = `
                    <div class="achievement-icon">${achievement.icon}</div>
                    <div class="achievement-name">${achievement.name}</div>
                    <div class="achievement-desc">${achievement.desc}</div>
                `;
                
                container.appendChild(achievementCard);
            });
        }

        // Update messages display
        function updateMessagesDisplay() {
            const container = document.getElementById('tree-messages');
            container.innerHTML = '';
            
            // Show only last 3 messages
            const recentMessages = plantData.messages.slice(-3);
            
            recentMessages.forEach(msg => {
                const messageDiv = document.createElement('div');
                messageDiv.className = 'tree-message';
                messageDiv.innerHTML = `
                    <div class="tree-message-title"><i class="fas fa-comment"></i> ${msg.title}</div>
                    <div class="tree-message-content">${msg.content}</div>
                `;
                container.appendChild(messageDiv);
            });
        }

        // Save plant data to device
        function savePlantData() {
            let content = " ANG ATING PLANT LOVE TREE \n\n";
            content += "Hardin ng Pag-ibig - Patuloy na Lumalago at Yumayabong\n\n";
            content += "Start Date: December 13, 2025\n";
            content += "Goal Date: December 13, 2026\n";
            content += "One Year Journey of Love\n\n";
            content += "=".repeat(60) + "\n\n";
            
            if (!canStartWatering()) {
                const daysUntilStart = calculateDaysUntilStart();
                content += `Kasalukuyang Status: Naghihintay sa pagsisimula\n`;
                content += `Mga Araw na Natitira Bago Magsimula: ${daysUntilStart} araw\n`;
                content += `Magsisimula sa: December 13, 2025\n`;
            } else {
                content += `Kasalukuyang Halaman: ${plantData.treeName} ${plantData.treeEmoji}\n`;
                content += `Porsyento ng Paglago: ${plantData.growthProgress.toFixed(1)}%\n`;
                content += `Kasulukuyang Streak: ${plantData.currentStreak} araw na sunod\n`;
                content += `Kabuuang Pagdilig: ${plantData.totalWatered} beses\n`;
                content += `Chance na Natitira: ${plantData.chancesLeft}\n`;
                content += `Huling Pagdilig: ${plantData.lastWatered ? new Date(plantData.lastWatered).toLocaleString() : 'Wala pa'}\n`;
                content += `Kalagayan: ${plantData.isAlive ? ' Buhay at Malusog' : ' Patay (Kailangan ng Revival)'}\n`;
            }
            
            content += `\nAraw-araw na Pagdilig Hanggang: December 13, 2026\n\n`;
            
            content += "=".repeat(60) + "\n\n";
            content += "COUNTDOWN HANGGANG DECEMBER 13, 2026:\n\n";
            
            const goalDate = new Date(plantData.goalDate);
            const now = new Date();
            const timeDiff = goalDate.getTime() - now.getTime();
            const daysLeft = Math.ceil(timeDiff / (1000 * 3600 * 24));
            
            content += `Natitirang Araw: ${daysLeft > 0 ? daysLeft : 0} araw\n\n`;
            
            content += "=".repeat(60) + "\n\n";
            content += "MGA ACHIEVEMENTS:\n\n";
            
            let unlockedCount = 0;
            achievementList.forEach(achievement => {
                const isUnlocked = plantData.achievements.includes(achievement.id);
                if (isUnlocked) {
                    content += ` ${achievement.icon} ${achievement.name}: ${achievement.desc}\n`;
                    unlockedCount++;
                }
            });
            
            content += `\nKabuuang Na-unlock: ${unlockedCount}/${achievementList.length} achievements\n\n`;
            
            content += "=".repeat(60) + "\n\n";
            content += "MGA STAGE NG PAGLAGO:\n\n";
            
            treeStages.forEach((stage, index) => {
                const isCurrent = index === plantData.currentStage;
                const isCompleted = index < plantData.currentStage;
                const status = isCurrent ? " KASALUKUYAN" : isCompleted ? " NATAPOS" : " HINDI PA";
                content += `${stage.emoji} ${stage.name} (${stage.minProgress}-${stage.maxProgress}%) - ${status}\n`;
            });
            
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'ating-plant-love-tree.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showSuccessMessage("Na-save ang ating Plant Love Tree!");
        }

        // Helper function to get default reasons
        function getDefaultReason(number) {
            const defaultReasons = [
                "The way you make me feel special",
                "Your incredible sense of humor",
                "How you always know what to say",
                "Your beautiful eyes that I get lost in",
                "The way you care for others",
                "Your intelligence and wisdom",
                "How you challenge me to be better",
                "Your patience and understanding",
                "The way you love me unconditionally",
                "Everything about you makes me happy"
            ];
            
            const defaultDescriptions = [
                "You have a way of making me feel like I'm the most important person in the world.",
                "Your laughter is contagious and you always know how to brighten my day.",
                "In every situation, you know exactly what I need to hear to feel better.",
                "When I look into your eyes, I see my future and everything I've ever wanted.",
                "Your compassion for others shows what a beautiful soul you truly have.",
                "I'm constantly amazed by how smart and insightful you are about everything.",
                "You push me to grow and become the best version of myself.",
                "No matter what happens, you're always there with understanding and support.",
                "Your love is the most precious gift I've ever received in my life.",
                "From the smallest mannerisms to your biggest dreams, everything about you brings me joy."
            ];
            
            const colors = ["#FFD700", "#9C6BFF", "#FF6B8B", "#4A90E2", "#FF8E9E", "#FFD700", "#9C6BFF", "#FF6B8B", "#4A90E2", "#FF8E9E"];
            const emojis = ["", "", "", "", "", "", "", "", "", ""];
            
            return {
                reason: defaultReasons[number - 1] || "Reason " + number,
                description: defaultDescriptions[number - 1] || "This is reason number " + number,
                emoji: emojis[(number - 1) % emojis.length],
                color: colors[(number - 1) % colors.length]
            };
        }

        // Save timeline to localStorage
        function saveTimelineToStorage() {
            localStorage.setItem('loveJourneyTimeline', JSON.stringify(timelineStories));
        }

        // Save reasons to localStorage
        function saveReasonsToStorage() {
            localStorage.setItem('loveJourneyReasons', JSON.stringify(loveReasons));
        }

        // Save diary to localStorage
        function saveDiaryToStorage() {
            localStorage.setItem('loveJourneyDiary', JSON.stringify(diaryEntries));
        }

        // Save plant to localStorage
        function savePlantToStorage() {
            localStorage.setItem('loveJourneyPlant', JSON.stringify(plantData));
        }

        // Update statistics
        function updateStats() {
            // Removed the number updates to keep only heart icons
        }

        // Update diary statistics
        function updateDiaryStats() {
            document.getElementById('diary-count').textContent = diaryEntries.length;
            
            if (diaryEntries.length > 0) {
                const latestEntry = diaryEntries[diaryEntries.length - 1];
                document.getElementById('diary-mood').textContent = latestEntry.mood || '';
                
                const streak = Math.min(diaryEntries.length, 7);
                document.getElementById('diary-streak').textContent = streak;
            } else {
                document.getElementById('diary-mood').textContent = '';
                document.getElementById('diary-streak').textContent = '0';
            }
        }

        // Create heart explosion animation
        function createHeartExplosion(x, y) {
            const explosion = document.createElement('div');
            explosion.className = 'heart-explosion';
            explosion.style.left = `${x}px`;
            explosion.style.top = `${y}px`;
            
            for (let i = 0; i < 15; i++) {
                const heart = document.createElement('div');
                heart.className = 'explosion-heart';
                heart.innerHTML = '';
                heart.style.color = getRandomHeartColor();
                
                const angle = Math.random() * Math.PI * 2;
                const distance = 50 + Math.random() * 100;
                const tx = Math.cos(angle) * distance;
                const ty = Math.sin(angle) * distance;
                
                heart.style.setProperty('--tx', `${tx}px`);
                heart.style.setProperty('--ty', `${ty}px`);
                heart.style.animationDelay = `${Math.random() * 0.5}s`;
                
                explosion.appendChild(heart);
            }
            
            document.body.appendChild(explosion);
            
            setTimeout(() => {
                explosion.remove();
            }, 2000);
        }

        // Get random heart color
        function getRandomHeartColor() {
            const colors = [
                '#ff6b8b', '#ff8e9e', '#ffd3d3', '#ff9eb5', 
                '#ffb6c1', '#ff69b4', '#ff1493', '#ff6b8b'
            ];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        // Render the timeline - UPDATED WITH FIXED CONTENT
        function renderTimeline() {
            const timelineContainer = document.getElementById('timeline-container');
            timelineContainer.innerHTML = '';
            
            timelineStories.forEach((story, index) => {
                const timelineItem = document.createElement('div');
                timelineItem.className = 'timeline-item';
                timelineItem.setAttribute('data-index', index);
                
                let imageHtml = '';
                if (story.image) {
                    imageHtml = `<img src="${story.image}" class="timeline-image" alt="${story.title}">`;
                }
                
                let tagsHtml = '';
                if (story.tags && story.tags.length > 0) {
                    tagsHtml = '<div class="memory-tags">';
                    story.tags.forEach(tag => {
                        tagsHtml += `<span class="memory-tag">${tag}</span>`;
                    });
                    tagsHtml += '</div>';
                }
                
                let photoActionsHtml = '';
                if (story.image) {
                    photoActionsHtml = `
                        <div class="photo-actions">
                            <button class="action-btn change-photo" onclick="event.stopPropagation(); changePhoto(${index})">
                                <i class="fas fa-sync-alt"></i> Change Photo
                            </button>
                            <button class="action-btn remove-photo" onclick="event.stopPropagation(); removePhoto(${index})">
                                <i class="fas fa-trash"></i> Remove Photo
                            </button>
                        </div>
                    `;
                }
                
                timelineItem.innerHTML = `
                    <div class="timeline-date">
                        <i class="far fa-calendar-alt"></i> 
                        <span class="special-date">${story.date}</span>
                    </div>
                    <h3>${story.title}</h3>
                    <p>${story.description.substring(0, 150)}...</p>
                    ${tagsHtml}
                    ${imageHtml}
                    ${photoActionsHtml}
                    <div class="timeline-actions">
                        <button class="action-btn edit" onclick="event.stopPropagation(); editTimelineEntry(${index})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="action-btn delete" onclick="event.stopPropagation(); showDeleteModal(${index})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                `;
                
                timelineItem.addEventListener('click', function(e) {
                    if (!e.target.closest('.timeline-actions') && !e.target.closest('.photo-actions')) {
                        createHeartExplosion(e.clientX, e.clientY);
                        openTimelineModal(index);
                    }
                });
                
                timelineContainer.appendChild(timelineItem);
            });
            
            updateStats();
        }

        // Render reasons with clickable functionality - WITH EDIT BUTTONS AND FIXED CONTENT
        function renderReasons() {
            const reasonsContainer = document.getElementById('reasons-container');
            reasonsContainer.innerHTML = '';
            
            while (loveReasons.length < 10) {
                loveReasons.push(getDefaultReason(loveReasons.length + 1));
            }
            
            if (loveReasons.length > 10) {
                loveReasons = loveReasons.slice(0, 10);
            }
            
            loveReasons.forEach((reason, index) => {
                const reasonCard = document.createElement('div');
                reasonCard.className = 'reason-card';
                reasonCard.style.borderLeft = `8px solid ${reason.color}`;
                reasonCard.style.background = `linear-gradient(135deg, ${reason.color}15, ${reason.color}08)`;
                reasonCard.setAttribute('data-index', index);
                
                reasonCard.innerHTML = `
                    <div class="reason-header">
                        <div class="reason-emoji">${reason.emoji}</div>
                        <div class="reason-number">${index + 1}</div>
                    </div>
                    <h3 class="reason-title">${reason.reason}</h3>
                    <p class="reason-description">${reason.description.substring(0, 100)}...</p>
                    <div class="reason-actions">
                        <button class="action-btn edit" onclick="event.stopPropagation(); editReason(${index})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                    </div>
                `;
                
                // Add click event to open reason modal
                reasonCard.addEventListener('click', function(e) {
                    if (!e.target.closest('.reason-actions')) {
                        createHeartExplosion(e.clientX, e.clientY);
                        openReasonModal(index);
                    }
                });
                
                reasonsContainer.appendChild(reasonCard);
            });
            
            saveReasonsToStorage();
        }

        // Edit reason - UPDATED WITH CUSTOM EMOJI INPUT
        function editReason(index) {
            const reason = loveReasons[index];
            
            // Create edit modal
            const editModal = document.createElement('div');
            editModal.className = 'modal active';
            editModal.innerHTML = `
                <div class="modal-content" style="max-width: 600px;">
                    <span class="close-modal" onclick="this.parentElement.parentElement.remove()"></span>
                    <h2 style="color: ${reason.color}; margin-bottom: 30px;">Edit Reason ${index + 1}</h2>
                    
                    <div class="form-group">
                        <label class="form-label">Reason</label>
                        <input type="text" id="edit-reason-text" class="form-input" value="${reason.reason}" placeholder="Enter your reason">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <textarea id="edit-reason-desc" class="form-textarea" rows="4" placeholder="Enter detailed description">${reason.description}</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Emoji</label>
                        <div class="custom-emoji-container">
                            <div class="emoji-input-group">
                                <input type="text" id="edit-reason-emoji" class="emoji-input" value="${reason.emoji}" maxlength="2" placeholder="">
                            </div>
                            <div class="emoji-help">
                                You can use any emoji! Examples: , , , , , 
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Color</label>
                        <div class="color-selection">
                            <div class="color-option ${reason.color === '#FFD700' ? 'selected' : ''}" style="background: #FFD700;" onclick="selectEditColor('#FFD700')"></div>
                            <div class="color-option ${reason.color === '#9C6BFF' ? 'selected' : ''}" style="background: #9C6BFF;" onclick="selectEditColor('#9C6BFF')"></div>
                            <div class="color-option ${reason.color === '#FF6B8B' ? 'selected' : ''}" style="background: #FF6B8B;" onclick="selectEditColor('#FF6B8B')"></div>
                            <div class="color-option ${reason.color === '#4A90E2' ? 'selected' : ''}" style="background: #4A90E2;" onclick="selectEditColor('#4A90E2')"></div>
                            <div class="color-option ${reason.color === '#FF8E9E' ? 'selected' : ''}" style="background: #FF8E9E;" onclick="selectEditColor('#FF8E9E')"></div>
                        </div>
                        <input type="hidden" id="edit-reason-color" value="${reason.color}">
                    </div>
                    
                    <div class="form-buttons" style="margin-top: 30px;">
                        <button class="btn btn-secondary" onclick="this.parentElement.parentElement.parentElement.remove()">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                        <button class="btn btn-primary" onclick="saveEditedReason(${index})" style="background: linear-gradient(135deg, ${reason.color}, ${adjustColor(reason.color, -20)});">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(editModal);
            
            // Add styles for emoji and color selection
            const style = document.createElement('style');
            style.textContent = `
                .emoji-input-group {
                    display: flex;
                    gap: 10px;
                    align-items: center;
                }
                
                .emoji-input {
                    font-size: 2rem;
                    width: 80px;
                    height: 70px;
                    text-align: center;
                    border: 3px solid #e0e0e0;
                    border-radius: 15px;
                    background: rgba(255, 255, 255, 0.5);
                    transition: all 0.3s ease;
                }
                
                .emoji-input:focus {
                    outline: none;
                    border-color: ${reason.color};
                    box-shadow: 0 0 0 3px ${reason.color}30;
                }
                
                .emoji-help {
                    color: #666;
                    font-size: 0.9rem;
                    margin-top: 5px;
                    text-align: center;
                }
                
                .emoji-help span {
                    background: #f0f0f0;
                    padding: 2px 8px;
                    border-radius: 10px;
                    font-family: monospace;
                }
                
                .color-selection {
                    display: flex;
                    gap: 15px;
                    flex-wrap: wrap;
                }
                
                .color-option {
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    border: 3px solid transparent;
                }
                
                .color-option:hover {
                    transform: scale(1.1);
                }
                
                .color-option.selected {
                    border: 3px solid #333;
                    transform: scale(1.1);
                    box-shadow: 0 0 10px rgba(0,0,0,0.2);
                }
            `;
            document.head.appendChild(style);
        }

        // Select color for editing
        function selectEditColor(color) {
            document.getElementById('edit-reason-color').value = color;
            
            // Update selected state
            document.querySelectorAll('.color-option').forEach(option => {
                option.classList.remove('selected');
                if (option.style.background === color) {
                    option.classList.add('selected');
                }
            });
            
            // Update save button color
            const saveBtn = document.querySelector('.btn-primary');
            saveBtn.style.background = `linear-gradient(135deg, ${color}, ${adjustColor(color, -20)})`;
        }

        // Helper function to adjust color brightness
        function adjustColor(color, amount) {
            // Simple color adjustment - in a real app you'd want a proper color library
            return color;
        }

        // Save edited reason
        function saveEditedReason(index) {
            const reasonText = document.getElementById('edit-reason-text').value;
            const reasonDesc = document.getElementById('edit-reason-desc').value;
            const reasonEmoji = document.getElementById('edit-reason-emoji').value;
            const reasonColor = document.getElementById('edit-reason-color').value;
            
            if (!reasonText || !reasonDesc) {
                alert('Please fill in both reason and description');
                return;
            }
            
            // Update the reason
            loveReasons[index] = {
                reason: reasonText,
                description: reasonDesc,
                emoji: reasonEmoji || "", // Default to heart if empty
                color: reasonColor
            };
            
            // Save to storage
            saveReasonsToStorage();
            
            // Re-render reasons
            renderReasons();
            
            // Close modal
            const modal = document.querySelector('.modal.active');
            if (modal) {
                modal.remove();
            }
            
            // Show success message
            showSuccessMessage(`Reason ${index + 1} updated successfully!`);
        }

        // NEW FUNCTION: Toggle diary entry expansion
        function toggleDiaryExpand(index) {
            const diaryEntry = document.querySelector(`.diary-entry[data-index="${index}"]`);
            if (diaryEntry) {
                const isExpanded = diaryEntry.classList.contains('expanded');
                
                if (isExpanded) {
                    diaryEntry.classList.remove('expanded');
                } else {
                    diaryEntry.classList.add('expanded');
                }
                
                // Update the "Read more" text
                const readMoreBtn = diaryEntry.querySelector('.diary-read-more');
                if (readMoreBtn) {
                    readMoreBtn.textContent = isExpanded ? 'Click to read more...' : 'Show less';
                }
            }
        }

        // Render the diary - WITH EDIT/DELETE BUTTONS AND EXPANDABLE CONTENT
        function renderDiary() {
            const diaryContainer = document.getElementById('diary-container');
            diaryContainer.innerHTML = '';
            
            const sortedEntries = [...diaryEntries].sort((a, b) => {
                return b.date.localeCompare(a.date);
            });
            
            if (sortedEntries.length === 0) {
                const emptyState = document.createElement('div');
                emptyState.className = 'add-diary-card';
                emptyState.onclick = showAddDiaryForm;
                emptyState.innerHTML = `
                    <i class="fas fa-book-open add-diary-icon"></i>
                    <div class="add-diary-text">No diary entries yet</div>
                    <p style="color: #666; margin-top: 10px; font-size: 0.9rem;">Click to write your first diary entry</p>
                `;
                diaryContainer.appendChild(emptyState);
                return;
            }
            
            sortedEntries.forEach((entry, index) => {
                const originalIndex = diaryEntries.indexOf(entry);
                const diaryEntry = document.createElement('div');
                diaryEntry.className = 'diary-entry';
                diaryEntry.setAttribute('data-index', originalIndex);
                
                diaryEntry.innerHTML = `
                    <div class="diary-header">
                        <div class="diary-date">
                            <i class="far fa-calendar"></i> ${entry.date}
                        </div>
                        <div class="diary-mood">${entry.mood}</div>
                    </div>
                    <h3 class="diary-title">${entry.title}</h3>
                    <div class="diary-content">${entry.content}</div>
                    <span class="diary-read-more" onclick="event.stopPropagation(); toggleDiaryExpand(${originalIndex})">Click to read more...</span>
                    
                    <div class="diary-actions" style="display: flex; gap: 10px; margin-top: 20px; justify-content: flex-end;">
                        <button class="action-btn edit" onclick="event.stopPropagation(); editDiaryEntry(${originalIndex})" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 5px; font-size: 0.9rem;">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="action-btn delete" onclick="event.stopPropagation(); showDeleteDiaryModal(${originalIndex})" style="background: linear-gradient(135deg, #ff6b6b, #ff5252); color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 5px; font-size: 0.9rem;">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                `;
                
                // Add click event to open diary modal
                diaryEntry.addEventListener('click', function(e) {
                    if (!e.target.closest('.diary-actions') && !e.target.closest('.diary-read-more')) {
                        createHeartExplosion(e.clientX, e.clientY);
                        openDiaryModal(originalIndex);
                    }
                });
                
                diaryContainer.appendChild(diaryEntry);
            });
            
            updateDiaryStats();
        }

        // Open reason modal
        function openReasonModal(index) {
            currentReasonIndex = index;
            const reason = loveReasons[index];
            
            document.getElementById('reason-modal-number').textContent = index + 1;
            document.getElementById('reason-modal-emoji').textContent = reason.emoji;
            document.getElementById('reason-modal-title').textContent = reason.reason;
            document.getElementById('reason-modal-description').textContent = reason.description;
            
            document.getElementById('reason-modal').classList.add('active');
        }

        // Close reason modal
        function closeReasonModal() {
            document.getElementById('reason-modal').classList.remove('active');
            currentReasonIndex = -1;
        }

        // Open diary modal
        function openDiaryModal(index) {
            currentDiaryIndex = index;
            const entry = diaryEntries[index];
            
            document.getElementById('diary-modal-date-text').textContent = entry.date;
            document.getElementById('diary-modal-mood').textContent = entry.mood;
            document.getElementById('diary-modal-title').textContent = entry.title;
            document.getElementById('diary-modal-content').textContent = entry.content;
            
            document.getElementById('diary-modal').classList.add('active');
        }

        // Close diary modal
        function closeDiaryModal() {
            document.getElementById('diary-modal').classList.remove('active');
            currentDiaryIndex = -1;
        }

        // Save current reason to device
        function saveCurrentReason() {
            if (currentReasonIndex === -1) return;
            
            const reason = loveReasons[currentReasonIndex];
            const content = `
# Reason ${currentReasonIndex + 1}

${reason.reason}

${reason.description}

Emoji: ${reason.emoji}
            `.trim();
            
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `reason-${currentReasonIndex + 1}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showSuccessMessage("Reason saved to your device!");
        }

        // Save current diary entry to device
        function saveCurrentDiaryEntry() {
            if (currentDiaryIndex === -1) return;
            
            const entry = diaryEntries[currentDiaryIndex];
            const content = `
# ${entry.title}

Date: ${entry.date}
Mood: ${entry.mood}

${entry.content}
            `.trim();
            
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `diary-${entry.date.replace(/\s+/g, '_')}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showSuccessMessage("Diary entry saved to your device!");
        }

        // Save reasons to device
        function saveReasonsToDevice() {
            let content = "10 Reasons Why I Love You\n\n";
            content += "A collection of heartfelt reasons why you mean everything to me\n\n";
            
            loveReasons.forEach((reason, index) => {
                content += `${index + 1}. ${reason.reason}\n\n`;
                content += `${reason.description}\n\n`;
                content += "=".repeat(50) + "\n\n";
            });
            
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = '10-reasons-why-i-love-you.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showSuccessMessage("Reasons saved to your device!");
        }

        // Save diary to device
        function saveDiaryToDevice() {
            if (diaryEntries.length === 0) {
                alert("Your diary is empty. Add some entries first!");
                return;
            }
            
            let content = "Our Diary\n\n";
            content += "Personal thoughts and moments from our journey together\n\n";
            
            const sortedEntries = [...diaryEntries].sort((a, b) => a.date.localeCompare(b.date));
            
            sortedEntries.forEach((entry, index) => {
                content += `# ${entry.title}\n\n`;
                content += `Date: ${entry.date}\n`;
                content += `Mood: ${entry.mood}\n\n`;
                content += `${entry.content}\n\n`;
                content += "=".repeat(50) + "\n\n";
            });
            
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'our-diary.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showSuccessMessage("Diary saved to your device!");
        }

        // Show add entry form
        function showAddEntryForm() {
            editingIndex = -1;
            document.getElementById('form-title').textContent = 'Add New Memory';
            document.getElementById('entry-id').value = '';
            document.getElementById('entry-title').value = '';
            document.getElementById('entry-date').value = '';
            document.getElementById('entry-description').value = '';
            document.getElementById('entry-image').value = '';
            document.getElementById('current-photo-container').style.display = 'none';
            document.getElementById('photo-label').textContent = 'Add a Photo';
            showPage('add-entry-page');
        }

        // Show add diary form - UPDATED WITH NEW MOOD SELECTION
        function showAddDiaryForm() {
            editingDiaryIndex = -1;
            currentMood = '';
            document.getElementById('diary-form-title').textContent = 'Add New Diary Entry';
            document.getElementById('diary-id').value = '';
            document.getElementById('diary-title').value = '';
            document.getElementById('diary-date').value = 'Today';
            document.getElementById('diary-content').value = '';
            document.getElementById('diary-mood-input').value = '';
            
            // Reset to default mood with visual selection
            selectMood('');
            
            showPage('add-diary-page');
        }

        // Select mood - UPDATED FUNCTION
        function selectMood(mood) {
            currentMood = mood;
            document.getElementById('diary-mood-input').value = mood;
            
            // Remove selected class from all options
            document.querySelectorAll('.mood-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Add selected class to clicked option
            const selectedOption = document.querySelector(`.mood-option[data-mood="${mood}"]`);
            if (selectedOption) {
                selectedOption.classList.add('selected');
            }
        }

        // Edit timeline entry
        function editTimelineEntry(index) {
            editingIndex = index;
            const story = timelineStories[index];
            
            document.getElementById('form-title').textContent = 'Edit Memory';
            document.getElementById('entry-id').value = index;
            document.getElementById('entry-title').value = story.title;
            document.getElementById('entry-date').value = story.date;
            document.getElementById('entry-description').value = story.description;
            
            if (story.image) {
                document.getElementById('current-photo').src = story.image;
                document.getElementById('current-photo-container').style.display = 'block';
                document.getElementById('photo-label').textContent = 'Change Photo';
            } else {
                document.getElementById('current-photo-container').style.display = 'none';
                document.getElementById('photo-label').textContent = 'Add a Photo';
            }
            
            showPage('add-entry-page');
        }

        // Edit diary entry - UPDATED WITH NEW MOOD SELECTION
        function editDiaryEntry(index) {
            editingDiaryIndex = index;
            const entry = diaryEntries[index];
            
            document.getElementById('diary-form-title').textContent = 'Edit Diary Entry';
            document.getElementById('diary-id').value = index;
            document.getElementById('diary-title').value = entry.title;
            document.getElementById('diary-date').value = entry.date;
            document.getElementById('diary-content').value = entry.content;
            document.getElementById('diary-mood-input').value = entry.mood;
            
            // Set the correct mood selection
            selectMood(entry.mood);
            
            showPage('add-diary-page');
        }

        // Change photo for a timeline entry
        function changePhoto(index) {
            editingIndex = index;
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        timelineStories[index].image = event.target.result;
                        saveTimelineToStorage();
                        renderTimeline();
                        showSuccessMessage("Photo updated successfully!");
                    };
                    reader.readAsDataURL(file);
                }
            };
            input.click();
        }

        // Remove photo from a timeline entry
        function removePhoto(index) {
            timelineStories[index].image = "";
            saveTimelineToStorage();
            renderTimeline();
            showSuccessMessage("Photo removed successfully!");
        }

        // Remove current photo in edit form
        function removeCurrentPhoto() {
            document.getElementById('current-photo').src = "";
            document.getElementById('current-photo-container').style.display = 'none';
            document.getElementById('photo-label').textContent = 'Add a Photo';
            document.getElementById('entry-image').value = "";
            
            if (editingIndex >= 0) {
                timelineStories[editingIndex].image = "";
            }
        }

        // Change photo from modal
        function changePhotoFromModal() {
            if (currentStoryIndex === -1) return;
            
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        timelineStories[currentStoryIndex].image = event.target.result;
                        saveTimelineToStorage();
                        renderTimeline();
                        closeTimelineModal();
                        showSuccessMessage("Photo updated successfully!");
                    };
                    reader.readAsDataURL(file);
                }
            };
            input.click();
        }

        // Remove photo from modal
        function removePhotoFromModal() {
            if (currentStoryIndex === -1) return;
            
            timelineStories[currentStoryIndex].image = "";
            saveTimelineToStorage();
            renderTimeline();
            closeTimelineModal();
            showSuccessMessage("Photo removed successfully!");
        }

        // Show delete confirmation modal
        function showDeleteModal(index) {
            deleteIndex = index;
            document.getElementById('delete-confirm-modal').classList.add('active');
            
            const confirmBtn = document.getElementById('confirm-delete-btn');
            confirmBtn.onclick = function() {
                deleteTimelineEntry(deleteIndex);
            };
        }

        // Show delete diary confirmation modal
        function showDeleteDiaryModal(index) {
            deleteDiaryIndex = index;
            document.getElementById('delete-diary-modal').classList.add('active');
            
            const confirmBtn = document.getElementById('confirm-diary-delete-btn');
            confirmBtn.onclick = function() {
                deleteDiaryEntry(deleteDiaryIndex);
            };
        }

        // Close delete confirmation modal
        function closeDeleteModal() {
            document.getElementById('delete-confirm-modal').classList.remove('active');
            deleteIndex = -1;
        }

        // Close delete diary modal
        function closeDeleteDiaryModal() {
            document.getElementById('delete-diary-modal').classList.remove('active');
            deleteDiaryIndex = -1;
        }

        // Delete timeline entry with animation
        function deleteTimelineEntry(index) {
            const timelineItem = document.querySelector(`.timeline-item[data-index="${index}"]`);
            
            if (timelineItem) {
                deletedStory = {
                    story: JSON.parse(JSON.stringify(timelineStories[index])),
                    index: index
                };
                
                timelineItem.classList.add('deleting');
                
                setTimeout(() => {
                    timelineStories.splice(index, 1);
                    saveTimelineToStorage();
                    renderTimeline();
                    closeDeleteModal();
                    
                    showUndoMessage();
                }, 800);
            } else {
                deletedStory = {
                    story: JSON.parse(JSON.stringify(timelineStories[index])),
                    index: index
                };
                
                timelineStories.splice(index, 1);
                saveTimelineToStorage();
                renderTimeline();
                closeDeleteModal();
                
                showUndoMessage();
            }
        }

        // Delete diary entry
        function deleteDiaryEntry(index) {
            deletedDiary = {
                entry: JSON.parse(JSON.stringify(diaryEntries[index])),
                index: index
            };
            
            diaryEntries.splice(index, 1);
            saveDiaryToStorage();
            renderDiary();
            closeDeleteDiaryModal();
            
            showDiaryUndoMessage();
        }

        // Show undo message after deletion
        function showUndoMessage() {
            const existingMessage = document.querySelector('.undo-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            const undoMessage = document.createElement('div');
            undoMessage.className = 'undo-message';
            undoMessage.innerHTML = `
                Memory deleted successfully!
                <button class="undo-btn" onclick="undoDelete()">
                    <i class="fas fa-undo"></i> Undo
                </button>
            `;
            
            document.body.appendChild(undoMessage);
            
            setTimeout(() => {
                if (undoMessage.parentNode) {
                    undoMessage.remove();
                    deletedStory = null;
                }
            }, 5000);
        }

        // Show undo message after diary deletion
        function showDiaryUndoMessage() {
            const existingMessage = document.querySelector('.undo-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            const undoMessage = document.createElement('div');
            undoMessage.className = 'undo-message';
            undoMessage.innerHTML = `
                Diary entry deleted successfully!
                <button class="undo-btn" onclick="undoDiaryDelete()">
                    <i class="fas fa-undo"></i> Undo
                </button>
            `;
            
            document.body.appendChild(undoMessage);
            
            setTimeout(() => {
                if (undoMessage.parentNode) {
                    undoMessage.remove();
                    deletedDiary = null;
                }
            }, 5000);
        }

        // Undo the last delete action
        function undoDelete() {
            if (deletedStory) {
                timelineStories.splice(deletedStory.index, 0, deletedStory.story);
                saveTimelineToStorage();
                renderTimeline();
                
                const undoMessage = document.querySelector('.undo-message');
                if (undoMessage) {
                    undoMessage.remove();
                }
                
                showSuccessMessage("Memory restored successfully!");
                
                deletedStory = null;
            }
        }

        // Undo the last diary delete action
        function undoDiaryDelete() {
            if (deletedDiary) {
                diaryEntries.splice(deletedDiary.index, 0, deletedDiary.entry);
                saveDiaryToStorage();
                renderDiary();
                
                const undoMessage = document.querySelector('.undo-message');
                if (undoMessage) {
                    undoMessage.remove();
                }
                
                showSuccessMessage("Diary entry restored successfully!");
                
                deletedDiary = null;
            }
        }

        // Save timeline entry (both add and edit)
        function saveTimelineEntry() {
            const title = document.getElementById('entry-title').value;
            const date = document.getElementById('entry-date').value;
            const description = document.getElementById('entry-description').value;
            const imageInput = document.getElementById('entry-image');
            
            if (!title || !date || !description) {
                alert('Please fill in all required fields');
                return;
            }
            
            const newEntry = {
                title,
                date,
                description,
                image: editingIndex >= 0 ? timelineStories[editingIndex].image : "",
                tags: editingIndex >= 0 ? timelineStories[editingIndex].tags : ["Special Moment"]
            };
            
            if (imageInput.files && imageInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    newEntry.image = e.target.result;
                    if (editingIndex >= 0) {
                        timelineStories[editingIndex] = newEntry;
                    } else {
                        timelineStories.push(newEntry);
                    }
                    saveTimelineToStorage();
                    renderTimeline();
                    showPage('timeline-page');
                    resetForm();
                    
                    showSuccessMessage("Memory saved successfully!");
                };
                reader.readAsDataURL(imageInput.files[0]);
            } else {
                if (editingIndex >= 0) {
                    timelineStories[editingIndex] = newEntry;
                } else {
                    timelineStories.push(newEntry);
                }
                saveTimelineToStorage();
                renderTimeline();
                showPage('timeline-page');
                resetForm();
                
                showSuccessMessage("Memory saved successfully!");
            }
        }

        // Save diary entry (both add and edit)
        function saveDiaryEntry() {
            const title = document.getElementById('diary-title').value;
            const date = document.getElementById('diary-date').value;
            const content = document.getElementById('diary-content').value;
            const mood = document.getElementById('diary-mood-input').value;
            
            if (!title || !date || !content) {
                alert('Please fill in all required fields');
                return;
            }
            
            const newEntry = {
                title,
                date,
                content,
                mood
            };
            
            if (editingDiaryIndex >= 0) {
                diaryEntries[editingDiaryIndex] = newEntry;
            } else {
                diaryEntries.push(newEntry);
            }
            
            saveDiaryToStorage();
            renderDiary();
            showPage('diary-page');
            
            editingDiaryIndex = -1;
            
            showSuccessMessage("Diary entry saved successfully!");
        }

        // Reset the form
        function resetForm() {
            document.getElementById('entry-title').value = '';
            document.getElementById('entry-date').value = '';
            document.getElementById('entry-description').value = '';
            document.getElementById('entry-image').value = '';
            document.getElementById('current-photo-container').style.display = 'none';
            document.getElementById('photo-label').textContent = 'Add a Photo';
            editingIndex = -1;
        }

        // Page navigation
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            
            window.scrollTo(0, 0);
        }

        // Open timeline modal
        function openTimelineModal(index) {
            currentStoryIndex = index;
            const story = timelineStories[index];
            document.getElementById('modal-title').textContent = story.title;
            document.getElementById('modal-description').textContent = story.description;
            
            const modalImage = document.getElementById('modal-image');
            const modalPhotoActions = document.getElementById('modal-photo-actions');
            
            if (story.image) {
                modalImage.src = story.image;
                modalImage.style.display = 'block';
                modalPhotoActions.style.display = 'flex';
            } else {
                modalImage.style.display = 'none';
                modalPhotoActions.style.display = 'none';
            }
            
            document.getElementById('timeline-modal').classList.add('active');
        }

        // Close timeline modal
        function closeTimelineModal() {
            document.getElementById('timeline-modal').classList.remove('active');
            currentStoryIndex = -1;
        }

        // Save current story to device
        function saveCurrentStory() {
            if (currentStoryIndex === -1) return;
            
            const story = timelineStories[currentStoryIndex];
            const content = `
# ${story.title}

${story.description}

Date: ${story.date}
${story.tags && story.tags.length > 0 ? `Tags: ${story.tags.join(', ')}` : ''}
            `.trim();
            
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${story.title.replace(/\s+/g, '_')}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showSuccessMessage("Story saved to your device!");
        }

        // Save all stories to device
        function saveToDevice() {
            let content = "Our Love Story\n\n";
            content += "A collection of our beautiful memories together\n\n";
            
            timelineStories.forEach((story, index) => {
                content += `# ${story.title}\n\n`;
                content += `${story.description}\n\n`;
                content += `Date: ${story.date}\n`;
                if (story.tags && story.tags.length > 0) {
                    content += `Tags: ${story.tags.join(', ')}\n`;
                }
                content += "\n" + "=".repeat(50) + "\n\n";
            });
            
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'our-love-story.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showSuccessMessage("Love story saved to your device!");
        }

        // Create water drop animation (only after start date)
        function createWaterDropAnimation() {
            if (!canStartWatering()) return;
            
            const container = document.getElementById('tree-container');
            const btn = document.getElementById('water-btn');
            if (!container || !btn) return;
            
            const btnRect = btn.getBoundingClientRect();
            const treeRect = container.getBoundingClientRect();
            
            for (let i = 0; i < 8; i++) {
                const drop = document.createElement('div');
                drop.className = 'water-drop';
                
                const startX = btnRect.left + Math.random() * btnRect.width;
                const startY = btnRect.top + Math.random() * btnRect.height;
                
                const targetX = treeRect.left + Math.random() * treeRect.width;
                const targetY = treeRect.top + Math.random() * treeRect.height;
                
                drop.style.left = startX + 'px';
                drop.style.top = startY + 'px';
                
                document.body.appendChild(drop);
                
                setTimeout(() => {
                    if (drop.parentNode) {
                        drop.remove();
                    }
                }, 500);
            }
        }

        // Create floating hearts animation
        function createFloatingHearts() {
            const container = document.getElementById('floating-hearts');
            container.innerHTML = '';
            
            const heartCount = window.innerWidth < 768 ? 12 : 20;
            
            for (let i = 0; i < heartCount; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                
                const size = Math.random() * 20 + 15;
                const posX = Math.random() * 100;
                const delay = Math.random() * 10;
                const duration = Math.random() * 10 + 15;
                const colorVal = Math.random() * 50 + 200;
                
                heart.style.width = `${size}px`;
                heart.style.height = `${size}px`;
                heart.style.left = `${posX}%`;
                heart.style.animation = `float ${duration}s ease-in-out ${delay}s infinite`;
                heart.style.background = `rgba(255, ${colorVal}, ${colorVal}, 0.8)`;
                
                heart.style.setProperty('--heart-color', `rgba(255, ${colorVal}, ${colorVal}, 0.8)`);
                
                container.appendChild(heart);
            }
            
            if (!document.getElementById('hearts-animation')) {
                const style = document.createElement('style');
                style.id = 'hearts-animation';
                style.textContent = `
                    @keyframes float {
                        0% {
                            top: 100%;
                            opacity: 0;
                            transform: rotate(45deg) translateX(0);
                        }
                        10% {
                            opacity: 1;
                        }
                        90% {
                            opacity: 1;
                        }
                        100% {
                            top: -50px;
                            opacity: 0;
                            transform: rotate(45deg) translateX(${Math.random() > 0.5 ? '-' : ''}30px);
                        }
                    }
                `;
                document.head.appendChild(style);
            }
        }

        // Show success message
        function showSuccessMessage(message) {
            const existingMessage = document.querySelector('.success-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            const successMessage = document.createElement('div');
            successMessage.className = 'success-message';
            successMessage.textContent = message;
            
            document.body.appendChild(successMessage);
            
            setTimeout(() => {
                if (successMessage.parentNode) {
                    successMessage.remove();
                }
            }, 3000);
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const timelineModal = document.getElementById('timeline-modal');
            const reasonModal = document.getElementById('reason-modal');
            const diaryModal = document.getElementById('diary-modal');
            const deleteModal = document.getElementById('delete-confirm-modal');
            const deleteDiaryModal = document.getElementById('delete-diary-modal');
            
            if (event.target === timelineModal) {
                closeTimelineModal();
            }
            if (event.target === reasonModal) {
                closeReasonModal();
            }
            if (event.target === diaryModal) {
                closeDiaryModal();
            }
            if (event.target === deleteModal) {
                closeDeleteModal();
            }
            if (event.target === deleteDiaryModal) {
                closeDeleteDiaryModal();
            }
            
            if (event.target.classList.contains('modal')) {
                event.target.remove();
            }
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            createFloatingHearts();
            initializeTimeline();
            initializeReasons();
            initializeDiary();
            initializePlant();
            
            // SETUP BETTER TOUCH HANDLING - FIX FOR MOBILE CLICKING
            setupBetterTouchHandling();
        });

        // Handle resize events
        window.addEventListener('resize', function() {
            createFloatingHearts();
        });

        // FIXED TOUCH HANDLING - CORRECTED VERSION
        function setupBetterTouchHandling() {
            // Set up touch handlers for all clickable elements
            const setupTouchHandler = (selector, handler) => {
                const elements = document.querySelectorAll(selector);
                elements.forEach(el => {
                    el.addEventListener('touchstart', function(e) {
                        // Mark the element as being touched
                        this.classList.add('touched');
                    }, { passive: true });
                    
                    el.addEventListener('touchend', function(e) {
                        this.classList.remove('touched');
                        handler.call(this, e);
                    }, { passive: true });
                    
                    el.addEventListener('touchmove', function(e) {
                        // If user moves finger too much, cancel the touch
                        this.classList.remove('touched');
                    }, { passive: true });
                });
            };
            
            // Menu buttons
            setupTouchHandler('.menu-btn', function(e) {
                e.preventDefault();
                e.stopPropagation();
                this.click();
            });
            
            // Action buttons
            setupTouchHandler('.action-btn', function(e) {
                e.preventDefault();
                e.stopPropagation();
                this.click();
            });
            
            // Back buttons
            setupTouchHandler('.back-btn', function(e) {
                e.preventDefault();
                e.stopPropagation();
                this.click();
            });
            
            // Save buttons
            setupTouchHandler('.save-data-btn, .save-reasons-btn', function(e) {
                e.preventDefault();
                e.stopPropagation();
                this.click();
            });
            
            // Diary entries
            setupTouchHandler('.diary-entry', function(e) {
                if (!e.target.closest('.diary-actions') && !e.target.closest('.diary-read-more')) {
                    e.preventDefault();
                    e.stopPropagation();
                    const index = this.getAttribute('data-index');
                    if (index !== null) {
                        createHeartExplosion(e.changedTouches[0].clientX, e.changedTouches[0].clientY);
                        openDiaryModal(parseInt(index));
                    }
                }
            });
            
            // Reason cards
            setupTouchHandler('.reason-card', function(e) {
                if (!e.target.closest('.reason-actions')) {
                    e.preventDefault();
                    e.stopPropagation();
                    const index = this.getAttribute('data-index');
                    if (index !== null) {
                        createHeartExplosion(e.changedTouches[0].clientX, e.changedTouches[0].clientY);
                        openReasonModal(parseInt(index));
                    }
                }
            });
            
            // Timeline items
            setupTouchHandler('.timeline-item', function(e) {
                if (!e.target.closest('.timeline-actions') && !e.target.closest('.photo-actions')) {
                    e.preventDefault();
                    e.stopPropagation();
                    const index = this.getAttribute('data-index');
                    if (index !== null) {
                        createHeartExplosion(e.changedTouches[0].clientX, e.changedTouches[0].clientY);
                        openTimelineModal(parseInt(index));
                    }
                }
            });
            
            // Add diary card
            setupTouchHandler('.add-diary-card', function(e) {
                e.preventDefault();
                e.stopPropagation();
                showAddDiaryForm();
            });
            
            // Add memory card
            setupTouchHandler('.add-memory-card', function(e) {
                e.preventDefault();
                e.stopPropagation();
                showAddEntryForm();
            });
            
            // Close modal buttons
            setupTouchHandler('.close-modal', function(e) {
                e.preventDefault();
                e.stopPropagation();
                const modal = this.closest('.modal');
                if (modal) {
                    modal.classList.remove('active');
                }
            });
            
            // Form buttons
            setupTouchHandler('.btn', function(e) {
                e.preventDefault();
                e.stopPropagation();
                this.click();
            });
            
            // Mood options
            setupTouchHandler('.mood-option', function(e) {
                e.preventDefault();
                e.stopPropagation();
                const mood = this.getAttribute('data-mood');
                if (mood) {
                    selectMood(mood);
                }
            });
            
            // Read more links
            setupTouchHandler('.diary-read-more', function(e) {
                e.preventDefault();
                e.stopPropagation();
                const diaryEntry = this.closest('.diary-entry');
                if (diaryEntry) {
                    const index = diaryEntry.getAttribute('data-index');
                    if (index !== null) {
                        toggleDiaryExpand(parseInt(index));
                    }
                }
            });
        }

        // Add CSS for touched state
        const touchStyle = document.createElement('style');
        touchStyle.textContent = `
            .touched {
                transform: scale(0.95) !important;
                transition: transform 0.1s ease !important;
            }
            
            /* Prevent text selection on touch */
            .menu-btn, .action-btn, .diary-entry, .reason-card, .timeline-item,
            .back-btn, .btn, .mood-option, .add-diary-card, .add-memory-card {
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
                -webkit-tap-highlight-color: transparent;
            }
            
            /* Improve scrolling */
            .container {
                -webkit-overflow-scrolling: touch;
                overflow-y: auto;
            }
            
            /* Better button active states */
            .menu-btn:active, .action-btn:active, .btn:active {
                transform: scale(0.97) !important;
            }
        `;
        document.head.appendChild(touchStyle);
    </script>
</body>
</html>
